import{jsxs as a,jsx as e}from"react/jsx-runtime";import{useMemo as u}from"react";import p from"bytes";import y from"classnames";import k from"react-dropzone";import w from"react-use-event-hook";const F=({file:i,i:r,removeFile:o,inline:s})=>e("div",{className:"file-drop__card col-lg-4 col-md-6 col-sm-6",children:e("div",{className:"panel panel--bordered hover-emboss--small",onClick:t=>t.stopPropagation(),children:s?a("div",{className:"panel__body flex flex-row",children:[a("div",{className:"text-left flex-fill",style:{maxWidth:"calc(100% - 20px)"},children:[e("div",{className:"text-ellipsis",children:i.name}),e("small",{style:{whiteSpace:"nowrap"},children:p.format(i.size,{unitSeparator:" "})})]}),e("a",{className:"link pull-right",onClick:()=>o(r),children:e("span",{className:"icon-close",title:"Remove the file."})})]}):a("div",{className:"panel__body",children:[e("a",{className:"link pull-right",style:{marginRight:"5px"},onClick:()=>o(r),children:e("span",{className:"icon-close",title:"Remove the file."})}),e("div",{className:"text-ellipsis half-margin-bottom",children:i.name}),e("span",{className:"file-icon text-muted icon-file-o qtr-margin-right"}),e("small",{children:p.format(i.size,{unitSeparator:" "})})]})})},`${r}-${i.name}`),S=({inline:i,accept:r,maxFileSize:o})=>i?a("div",{className:"dropzone-message flex flex-row flex-center-vertical",children:[e("h5",{className:"text-muted text-left flex-fill no-margin",children:"Click Here or Drop Files to Upload"}),r&&a("span",{className:"text-muted text-small half-margin-right",children:["Allowed files: ",typeof r=="string"?r.split(",").join(", "):r]}),e("span",{className:"file-drop__icon icon-upload"})]}):a("div",{className:"dropzone-message",children:[e("span",{className:"file-drop__icon icon-upload"}),e("h4",{className:"text-muted",children:"Click Here or Drop Files to Upload"}),r&&a("div",{className:"text-muted",children:["Allowed files: ",r.split(",").join(", ")]}),o&&a("div",{className:"text-muted",children:["Max file size: ",p.format(o,{unitSeparator:" "})]})]}),A=({files:i,inline:r,showTotalSelected:o,removeFile:s})=>!Array.isArray(i)||!i.length?null:a("div",{className:"dropzone-previews",children:[e("div",{className:"file-drop__container container--fluid",children:e("div",{className:"row",children:i.map((t,c)=>e(F,{file:t,i:c,inline:r,removeFile:s},c))})}),o?a("div",{className:"file-drop__filecnt",children:[i.length," selected"]}):null]}),C=({error:i,loose:r,compressed:o,inline:s,label:t,name:c,value:n,maxFileSize:h,maxFiles:f,onChange:x,showTotalSelected:N,...g})=>{const d=u(()=>h?p.parse(h):null,[h]),v=u(()=>{let l="";if(r&&(l="dropzone--loose"),o&&(l="dropzone--compressed"),s&&Array.isArray(n)&&n.length)switch(l){case"dropzone--loose":l=`${l} half-padding-bottom`;break;case"dropzone--compressed":l=`${l} no-padding-bottom`;break;default:l=`${l} qtr-padding-bottom`;break}return l},[r,o,n,s]),z=w(l=>{d&&(l=l.filter(m=>m.size<=d)),f&&l.length>f&&(l=l.slice(0,f)),x(l)}),_=l=>{x(Array.isArray(n)?n.filter((m,b)=>l!==b):n)};return a("div",{className:y("form-group",{"form-group--error":i}),children:[a("div",{className:"form-group__text",children:[t?e("label",{htmlFor:c,children:t}):null,e(k,{...g,onDrop:z,maxSize:d,children:({getRootProps:l,getInputProps:m})=>a("div",{className:`dropzone ${v}`,...l(),children:[e("input",{...m()}),e(A,{files:n,showTotalSelected:N,inline:s,removeFile:_}),Array.isArray(n)&&n.length?null:e(S,{maxFileSize:d,inline:s,accept:g.accept})]})})]}),i?e("div",{className:"help-block text-danger",role:"alert",children:e("span",{children:i})}):null]})};export{C as Dropzone};
//# sourceMappingURL=index.js.map
