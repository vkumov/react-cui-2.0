import{jsxs as s,jsx as o}from"react/jsx-runtime";import K,{useState as P,useEffect as S}from"react";import p from"react-use-event-hook";import{ConditionalWrapper as V}from"../Conditional/index.js";import{InputHelpBaloon as G,InputHelpBlock as J}from"../InputHelp/index.js";import{Label as D}from"../Label/index.js";import{appendClass as u}from"../utils/index.js";const z=[],L=K.forwardRef(({chipsColor:v="light",addOnBlur:I=!0,delimiters:O=[13],label:b=null,allowRepeat:j=!1,allowRegex:c=null,valueValidator:x=null,maxChips:m=null,baloon:C=null,className:d=null,id:A=null,error:f=null,value:N=null,onChange:t,outerWrap:$=!0,chipsOutside:R=!1,renderChip:a=null,onBlur:w=null,onChipRemove:B=null,onClick:E,noInput:F,...h},H)=>{const[r,g]=P(z);S(()=>{g(l=>N||l||z)},[N]);const y=p(l=>{typeof x=="function"&&!x(l)||g(e=>{if(j||!(e||[]).includes(l)){const n=(e||[]).concat(l);return typeof t=="function"&&t(n),n}else return e})}),W=p(l=>{let e=O;if(typeof e=="string"){const{map:n}=Array.prototype;e=n.call(e,q=>q.charCodeAt(0))}Array.isArray(e)&&e.includes(l.keyCode)&&(y(l.target.value),l.target.value="",l.stopPropagation(),l.preventDefault())}),_=p(l=>{var e;if(I&&(e=l.target)!=null&&e.value){const{value:n}=l.target;c&&RegExp(c).test(n)?y(n):c||y(n)}l.target.value="",typeof w=="function"&&w(l)}),i=p(l=>{g(e=>(e.splice(l,1),typeof t=="function"&&t(e.slice()),e.slice())),typeof B=="function"&&B(l)}),k=(!m||m&&Array.isArray(r)&&r.length<m)&&!F;return s(V,{wrapper:o("div",{className:`form-group${u(d)}${u(f,"form-group--error")}`,ref:H}),condition:$,children:[s("div",{className:`form-group__text chips${u(!$&&d,d)}`,children:[b?s("label",{htmlFor:A||h.name,children:[b,C?o(G,{baloon:C}):null]}):null,R&&Array.isArray(r)&&r.length?o("span",{className:"chips-outer qtr-margin-bottom",children:o("span",{className:"chips-inner",children:r.map((l,e)=>a?a({value:l,idx:e,onDelete:()=>i(e)}):o(D,{removable:!0,onRemove:()=>i(e),color:v,size:"small",className:"no-margin-bottom",children:l},`${l}-${e}`))})}):null,s("div",{className:`input ${u(!k,"dbl-padding-right")}`,onClick:E,children:[!R&&Array.isArray(r)&&r.length?o("span",{className:"chips-outer",children:o("span",{className:"chips-inner",children:r.map((l,e)=>a?a({value:l,idx:e,onDelete:()=>i(e)}):o(D,{removable:!0,onRemove:n=>{n.stopPropagation(),n.preventDefault(),i(e)},color:v,size:"small",className:"no-margin-bottom",children:l},`${l}-${e}`))})}):null,k?o("input",{type:"text",onKeyDown:W,onBlur:_,id:A||h.name,...h}):null]})]}),f?o(J,{text:f}):null]})});export{L as InputChips};
//# sourceMappingURL=index.js.map
