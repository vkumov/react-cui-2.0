import n,{useState as q,useEffect as K}from"react";import s from"react-use-event-hook";import{ConditionalWrapper as S}from"../Conditional/index.js";import{InputHelpBaloon as V,InputHelpBlock as j}from"../InputHelp/index.js";import{Label as w}from"../Label/index.js";import{appendClass as p}from"../utils/index.js";const B=[],G=n.forwardRef(({chipsColor:v="light",addOnBlur:D=!0,delimiters:z=[13],label:h=null,allowRepeat:I=!1,allowRegex:m=null,valueValidator:E=null,maxChips:c=null,baloon:C=null,className:u=null,id:b=null,error:f=null,value:A=null,onChange:a,outerWrap:N=!0,chipsOutside:x=!1,renderChip:o=null,onBlur:$=null,onChipRemove:R=null,onClick:P,noInput:F,...g},H)=>{const[r,d]=q(B);K(()=>{d(e=>A||e||B)},[A]);const y=s(e=>{typeof E=="function"&&!E(e)||d(t=>{if(I||!(t||[]).includes(e)){const l=(t||[]).concat(e);return typeof a=="function"&&a(l),l}else return t})}),O=s(e=>{let t=z;if(typeof t=="string"){const{map:l}=Array.prototype;t=l.call(t,_=>_.charCodeAt(0))}Array.isArray(t)&&t.includes(e.keyCode)&&(y(e.target.value),e.target.value="",e.stopPropagation(),e.preventDefault())}),W=s(e=>{var t;if(D&&(t=e.target)!=null&&t.value){const{value:l}=e.target;m&&RegExp(m).test(l)?y(l):m||y(l)}e.target.value="",typeof $=="function"&&$(e)}),i=s(e=>{d(t=>(t.splice(e,1),typeof a=="function"&&a(t.slice()),t.slice())),typeof R=="function"&&R(e)}),k=(!c||c&&Array.isArray(r)&&r.length<c)&&!F;return n.createElement(S,{wrapper:n.createElement("div",{className:`form-group${p(u)}${p(f,"form-group--error")}`,ref:H}),condition:N},n.createElement("div",{className:`form-group__text chips${p(!N&&u,u)}`},h?n.createElement("label",{htmlFor:b||g.name},h,C?n.createElement(V,{baloon:C}):null):null,x&&Array.isArray(r)&&r.length?n.createElement("span",{className:"chips-outer qtr-margin-bottom"},n.createElement("span",{className:"chips-inner"},r.map((e,t)=>o?o({value:e,idx:t,onDelete:()=>i(t)}):n.createElement(w,{removable:!0,onRemove:()=>i(t),color:v,size:"small",key:`${e}-${t}`,className:"no-margin-bottom"},e)))):null,n.createElement("div",{className:`input ${p(!k,"dbl-padding-right")}`,onClick:P},!x&&Array.isArray(r)&&r.length?n.createElement("span",{className:"chips-outer"},n.createElement("span",{className:"chips-inner"},r.map((e,t)=>o?o({value:e,idx:t,onDelete:()=>i(t)}):n.createElement(w,{removable:!0,onRemove:l=>{l.stopPropagation(),l.preventDefault(),i(t)},color:v,size:"small",key:`${e}-${t}`,className:"no-margin-bottom"},e)))):null,k?n.createElement("input",{type:"text",onKeyDown:O,onBlur:W,id:b||g.name,...g}):null)),f?n.createElement(j,{text:f}):null)});export{G as InputChips};
//# sourceMappingURL=index.js.map
