{"version":3,"file":"index.js","sources":["../../src/Select/Select.tsx"],"sourcesContent":["import React, {\n  ChangeEvent,\n  PropsWithChildren,\n  ReactNode,\n  useEffect,\n  forwardRef,\n  useCallback,\n  useState,\n  useRef,\n  useMemo,\n  isValidElement,\n  ReactElement,\n  ReactHTMLElement,\n  MutableRefObject,\n  FC,\n} from \"react\";\nimport { useMergeRefs } from \"use-callback-ref\";\n\nimport { InputChips } from \"src/InputChips\";\nimport type { FullInputChipsProps } from \"../InputChips\";\nimport { InputHelpBlock } from \"src/InputHelp\";\nimport { appendClass as ac } from \"src/utils\";\n\nfunction isOption(\n  element: ReactElement<unknown>\n): element is ReactHTMLElement<HTMLOptionElement> {\n  return element.type === \"option\";\n}\n\nfunction isOptGroup(\n  element: ReactElement<unknown>\n): element is ReactHTMLElement<HTMLOptGroupElement> {\n  return element.type === \"optgroup\";\n}\n\nconst SelectChildren = ({ children, handleOptionClick, isSelected }) =>\n  React.Children.map(children, (child, idx) => {\n    if (!isValidElement(child)) return child;\n\n    if (isOption(child))\n      return (\n        <a\n          key={idx}\n          onClick={(e) => handleOptionClick(e, child.props.value)}\n          className={`${ac(isSelected(child.props.value), \"selected\")}${ac(\n            child.props.disabled,\n            \"disabled\"\n          )}`}\n        >\n          {child.props.children}\n        </a>\n      );\n\n    if (isOptGroup(child))\n      return (\n        <div key={idx} className=\"dropdown__group\">\n          <div className=\"dropdown__group-header\">{child.props.label}</div>\n          <SelectChildren\n            handleOptionClick={handleOptionClick}\n            isSelected={isSelected}\n          >\n            {child.props.children}\n          </SelectChildren>\n        </div>\n      );\n\n    return child;\n  });\n\ntype Option = {\n  label: string;\n  value: string;\n};\n\ntype EditableSelectProps = {\n  compressed?: boolean;\n  label?: ReactNode;\n  prompt?: string;\n  inline?: boolean;\n  editable?: boolean;\n  type?: \"number\" | \"text\";\n  error?: ReactNode;\n  multi?: boolean;\n  onChange?: (value) => void;\n  value?: any;\n  displayValues?: boolean;\n  disabled?: boolean;\n  divRef?: MutableRefObject<HTMLDivElement>;\n  options?: Option[];\n  onSelect?: (value: string) => void | (() => void);\n  onDeselect?: (value: string) => void | (() => void);\n};\n\ntype WantedChipsProps = Omit<\n  FullInputChipsProps,\n  \"type\" | \"label\" | \"onSelect\" | \"onDeselect\" | \"value\"\n>;\n\ntype FullEditableSelectProps = PropsWithChildren<\n  EditableSelectProps & Partial<WantedChipsProps>\n>;\n\ntype Display = {\n  display: ReactNode;\n  value: any;\n};\n\nconst collectDisplays = (children: ReactNode): Display[] => {\n  const t = [];\n  React.Children.forEach(children, (child) => {\n    if (!isValidElement(child)) return null;\n    if (isOption(child)) {\n      t.push({\n        display: child.props.children,\n        value: child.props.value,\n      });\n    }\n    if (isOptGroup(child)) t.push(collectDisplays(child.props.children));\n  });\n  return t.flat();\n};\n\nexport const EditableSelect: FC<FullEditableSelectProps> = forwardRef<\n  HTMLInputElement,\n  FullEditableSelectProps\n>(\n  (\n    {\n      compressed = false,\n      prompt = \"Select an option\",\n      inline = false,\n      type = \"text\",\n      children,\n      label = null,\n      error = null,\n      onChange = null,\n      value: initialValue = undefined,\n      editable = false,\n      multi = false,\n      displayValues = false,\n      disabled,\n      className,\n      divRef,\n      options,\n      onSelect = null,\n      onDeselect = null,\n      ...input\n    },\n    inputRef\n  ) => {\n    const [isOpen, setOpen] = useState<boolean>(false);\n    const [value, setValue] = useState(initialValue);\n    const ref = useRef<HTMLDivElement>(undefined);\n\n    const display = useMemo(() => collectDisplays(children), [children]);\n\n    const handleClick = useCallback(\n      (newState = true) => {\n        if (disabled) return;\n        setOpen(newState);\n      },\n      [disabled]\n    );\n\n    useEffect(() => {\n      if (isOpen) {\n        const onOutsideClick = (e: MouseEvent) => {\n          // ignore clicks on the component itself\n          if (!(e.target instanceof Node) || !ref?.current) return;\n          if (ref.current && ref.current.contains(e.target)) return;\n\n          if (ref.current && !ref.current.contains(e.target)) {\n            handleClick(false);\n          }\n        };\n\n        document.addEventListener(\"click\", onOutsideClick, true);\n        return () =>\n          document.removeEventListener(\"click\", onOutsideClick, true);\n      }\n    }, [isOpen, handleClick]);\n\n    const handleOptionClick = useCallback(\n      (_e, newValue) => {\n        if (multi) {\n          let added = true;\n          setValue((curr) => {\n            if (curr?.includes(newValue)) {\n              added = false;\n              return curr.filter((v) => v !== newValue);\n            } else return (curr || []).concat(newValue);\n          });\n          const r = (added ? onSelect : onDeselect)?.call(undefined, newValue);\n          if (typeof r === \"function\") r();\n        } else {\n          setValue(newValue);\n        }\n        if (!multi) handleClick(false);\n      },\n      [handleClick, multi, onSelect, onDeselect]\n    );\n\n    const isSelected = (checkValue) =>\n      multi ? value?.includes(checkValue) : value === checkValue;\n\n    useEffect(() => {\n      setValue(initialValue);\n    }, [initialValue]);\n\n    useEffect(() => {\n      if (multi && initialValue && !Array.isArray(initialValue))\n        throw Error(\"Value must be an array if multi select is allowed.\");\n    }, [multi, initialValue]);\n\n    useEffect(() => {\n      if (typeof onChange === \"function\") onChange(value);\n    }, [value]);\n\n    return (\n      <div\n        className={`form-group dropdown${ac(\n          compressed,\n          \"input--compressed\"\n        )}${ac(isOpen, \"active\")}${ac(inline, \"form-group--inline\")}${ac(\n          error,\n          \"form-group--error\"\n        )}${ac(disabled, \"disabled\")}${ac(className)}`}\n        ref={useMergeRefs([ref, divRef])}\n      >\n        {multi ? (\n          <InputChips\n            className=\"select editable\"\n            label={label}\n            {...input}\n            placeholder={\n              !Array.isArray(value) || !value.length\n                ? input.placeholder || prompt\n                : \"\"\n            }\n            readOnly={!editable}\n            onClick={() => handleClick(true)}\n            onChange={() => void 0}\n            onChipRemove={(idx) => {\n              let val: any;\n              setValue((curr: any[]) => {\n                val = curr[idx];\n                return curr.filter((_v, i) => i !== idx);\n              });\n              if (typeof onDeselect === \"function\") onDeselect(val);\n            }}\n            value={\n              displayValues\n                ? value\n                : display\n                    .filter((d) => value?.includes(d.value))\n                    .map((d) => d.display)\n            }\n            noInput={\n              inline && !editable && Array.isArray(value) && value.length > 0\n            }\n            outerWrap={false}\n            ref={inputRef}\n          />\n        ) : (\n          <div\n            className=\"form-group__text select editable\"\n            onClick={() => handleClick(true)}\n          >\n            <input\n              type={type}\n              placeholder={input.placeholder || prompt}\n              autoComplete=\"off\"\n              readOnly={!editable}\n              {...input}\n              onChange={(e: ChangeEvent<HTMLInputElement>) => {\n                if (!editable) return;\n                e.persist();\n                setValue(e.target.value);\n              }}\n              value={\n                editable\n                  ? value || \"\"\n                  : !displayValues\n                  ? display?.find((el) => el.value === value)?.display || \"\"\n                  : value\n              }\n              ref={inputRef}\n            />\n            {label ? <label htmlFor={input.id}>{label}</label> : null}\n          </div>\n        )}\n        <div className=\"dropdown__menu\">\n          <SelectChildren\n            handleOptionClick={handleOptionClick}\n            isSelected={isSelected}\n          >\n            {options\n              ? options.map((opt, idx) => (\n                  <option key={idx} value={opt.value}>\n                    {opt.value}\n                  </option>\n                ))\n              : children}\n          </SelectChildren>\n        </div>\n        {error ? <InputHelpBlock text={error} /> : null}\n      </div>\n    );\n  }\n);\n"],"names":["isOption","element","type","isOptGroup","SelectChildren","children","handleOptionClick","isSelected","React","Children","map","child","idx","isValidElement","a","key","onClick","e","props","value","className","ac","disabled","div","label","collectDisplays","t","forEach","push","display","flat","EditableSelect","forwardRef","inputRef","compressed","prompt","inline","error","onChange","initialValue","undefined","editable","multi","displayValues","divRef","options","onSelect","onDeselect","input","useState","isOpen","setOpen","setValue","ref","useRef","useMemo","handleClick","useCallback","newState","useEffect","onOutsideClick","target","Node","current","contains","document","addEventListener","removeEventListener","_e","newValue","added","curr","includes","filter","v","concat","r","call","checkValue","Array","isArray","Error","useMergeRefs","InputChips","placeholder","length","readOnly","onChipRemove","val","_v","i","d","noInput","outerWrap","autoComplete","persist","find","el","htmlFor","id","opt","option","InputHelpBlock","text"],"mappings":"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"}