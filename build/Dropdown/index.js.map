{"version":3,"file":"index.js","sources":["../../src/Dropdown/Menu.tsx","../../src/Dropdown/Dropdown.tsx"],"sourcesContent":["import React, { FC, forwardRef, HTMLProps, ReactNode } from \"react\";\n\nimport { ConditionalWrapper } from \"src/Conditional\";\nimport { appendClass } from \"src/utils\";\n\ntype ElementProps = {\n  selected?: boolean;\n  icon?: string;\n  children: ReactNode;\n} & HTMLProps<HTMLAnchorElement>;\n\nexport const Element: FC<ElementProps> = ({\n  selected = false,\n  icon = null,\n  children,\n  className = null,\n  ...props\n}) => (\n  <a\n    className={`${selected ? \"selected\" : \"\"}${\n      className ? ` ${className}` : \"\"\n    }`}\n    {...props}\n  >\n    {icon ? <span className={`icon-${icon}`} /> : null}\n    <ConditionalWrapper\n      condition={Boolean(icon)}\n      wrapper={<span className=\"qtr-margin-left\" />}\n    >\n      {children}\n    </ConditionalWrapper>\n  </a>\n);\n\nexport const Divider = (): JSX.Element => <div className=\"divider\" />;\n\ntype GroupProps = {\n  children: ReactNode;\n};\n\nexport const Group: FC<GroupProps> = ({ children }) => (\n  <div className=\"dropdown__group\">{children}</div>\n);\n\ntype GroupHeaderProps = {\n  header: ReactNode;\n};\n\nexport const GroupHeader: FC<GroupHeaderProps> = ({ header }) => (\n  <div className=\"dropdown__group-header\">{header}</div>\n);\n\nexport const Menu = forwardRef<HTMLDivElement, HTMLProps<HTMLDivElement>>(\n  ({ children, className, ...props }, ref) => {\n    return (\n      <div\n        className={`dropdown__menu${appendClass(className)}`}\n        {...props}\n        ref={ref}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n","import React, {\n  FC,\n  HTMLProps,\n  MouseEvent,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\nimport { appendClass } from \"src/utils\";\nimport { Divider, Element, Group, GroupHeader, Menu } from \"./Menu\";\n\ntype DropdownHeaderProps = {\n  type: string;\n  handleClick: (...args) => void;\n  className?: string;\n  header: ReactNode;\n};\n\nconst DropdownHeader: FC<DropdownHeaderProps> = ({\n  type,\n  handleClick,\n  className,\n  header,\n}) => {\n  switch (type) {\n    case \"icon\":\n      return <span onClick={handleClick} className={className} />;\n    case \"link\":\n      return (\n        <a onClick={handleClick} className={className}>\n          {header}\n        </a>\n      );\n    case \"div\":\n      return (\n        <div onClick={handleClick} className={className}>\n          {header}\n        </div>\n      );\n    case \"button\":\n      return (\n        <button\n          type=\"button\"\n          onClick={handleClick}\n          className={`btn ${className}`}\n        >\n          {header}\n        </button>\n      );\n    default:\n      return React.isValidElement(header)\n        ? React.cloneElement(header, { onClick: handleClick })\n        : null;\n  }\n};\n\ntype DropdownType = \"icon\" | \"link\" | \"div\" | \"button\" | \"custom\";\n\ntype DropdownProps = {\n  type?: DropdownType;\n  className?: string;\n  header?: ReactNode;\n  openTo?: \"left\" | \"right\" | \"center\";\n  alwaysClose?: boolean;\n  onOpen?: (e) => void;\n  onClose?: (e) => void;\n  stopPropagation?: boolean;\n  divClassName?: string;\n  children: ReactNode;\n  up?: boolean;\n  isOpen?: boolean;\n} & HTMLProps<HTMLDivElement>;\n\nexport interface DropdownParts {\n  Element: typeof Element;\n  Divider: typeof Divider;\n  Group: typeof Group;\n  GroupHeader: typeof GroupHeader;\n  Menu: typeof Menu;\n}\n\nconst Dropdown: DropdownParts & FC<DropdownProps> = ({\n  openTo = \"right\",\n  children,\n  type = \"button\",\n  className = null,\n  header = null,\n  divClassName = null,\n  up = false,\n  onClose = null,\n  onOpen = null,\n  stopPropagation = false,\n  alwaysClose = false,\n  isOpen: outsideIsOpen,\n  ...props\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const divRef = useRef<HTMLDivElement>(undefined);\n\n  useEffect(() => {\n    if (typeof outsideIsOpen !== \"undefined\" && outsideIsOpen !== null)\n      setIsOpen(outsideIsOpen);\n  }, [outsideIsOpen]);\n\n  // eslint-disable-next-line prefer-const\n  let handleOutsideClick;\n\n  const handleClick = useCallback(\n    (e): void => {\n      if (stopPropagation) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n\n      setIsOpen((current) => {\n        if (!current) {\n          // attach/remove event handler\n          document.addEventListener(\"click\", handleOutsideClick, true);\n        } else {\n          document.removeEventListener(\"click\", handleOutsideClick, true);\n        }\n        const newIsOpen = !current;\n        if (newIsOpen && onOpen) onOpen(e);\n        if (!newIsOpen && onClose) onClose(e);\n        return newIsOpen;\n      });\n    },\n    [stopPropagation, onClose, onOpen]\n  );\n\n  handleOutsideClick = (e: MouseEvent<Node>): void => {\n    // ignore clicks on the component itself\n    if (!(e.target instanceof Node) || !divRef?.current) return;\n    if (!alwaysClose && divRef.current && divRef.current.contains(e.target))\n      return;\n\n    if (!divRef.current.contains(e.target)) {\n      handleClick(e);\n      return;\n    }\n    if (!divRef.current.isSameNode(e.target.parentNode) && alwaysClose) {\n      handleClick(e);\n      return;\n    }\n  };\n\n  return (\n    <div\n      className={`dropdown${appendClass(\n        [\"left\", \"center\"].includes(openTo),\n        `dropdown--${openTo}`\n      )}${appendClass(up, \"dropdown--up\")}${appendClass(\n        isOpen,\n        \"active\"\n      )}${appendClass(divClassName)}`}\n      ref={divRef}\n      {...props}\n    >\n      <DropdownHeader\n        type={type}\n        handleClick={handleClick}\n        className={className}\n        header={header}\n      />\n      <Menu>{children}</Menu>\n    </div>\n  );\n};\n\nDropdown.Divider = Divider;\nDropdown.Element = Element;\nDropdown.Group = Group;\nDropdown.GroupHeader = GroupHeader;\nDropdown.Menu = Menu;\n\nexport {\n  Dropdown,\n  Element as DropdownElement,\n  Divider as DropdownDivider,\n  Group as DropdownGroup,\n  GroupHeader as DropdownGroupHeader,\n};\n"],"names":["_extends","Element","selected","icon","children","className","props","a","span","ConditionalWrapper","condition","Boolean","wrapper","Divider","div","Group","GroupHeader","header","Menu","forwardRef","ref","appendClass","DropdownHeader","type","handleClick","onClick","button","React","isValidElement","cloneElement","Dropdown","openTo","divClassName","up","onClose","onOpen","stopPropagation","alwaysClose","isOpen","outsideIsOpen","setIsOpen","useState","divRef","useRef","undefined","useEffect","handleOutsideClick","useCallback","e","preventDefault","current","document","addEventListener","removeEventListener","newIsOpen","target","Node","contains","isSameNode","parentNode","includes"],"mappings":"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"}