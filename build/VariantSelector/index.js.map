{"version":3,"file":"index.js","sources":["../../src/VariantSelector/VariantSelector.tsx"],"sourcesContent":["import React, { FC, ReactNode, useEffect, useState } from \"react\";\n\nimport { ConditionalWrapper } from \"src/Conditional\";\nimport { Dropdown } from \"src/Dropdown\";\nimport { appendClass as ac } from \"src/utils\";\n\nexport type Variant = {\n  variant: string;\n  display: string;\n  component: ReactNode;\n  selected?: boolean;\n};\n\nexport type VariantSelectorProps = {\n  variants: Variant[];\n  name?: string;\n  title?: ReactNode;\n  inline?: boolean;\n  onChange?: (value: Variant) => void;\n  disableable?: boolean;\n  enableTitleAppend?: string;\n  className?: string;\n  list?: boolean;\n  variant?: string;\n};\n\ntype HeaderProps = {\n  variants: Variant[];\n  selectedIdx: number;\n  setIdx: (idx: number) => void;\n  placeholder?: string;\n};\n\nconst DropdownHeader: FC<HeaderProps> = ({\n  variants,\n  selectedIdx,\n  setIdx,\n  placeholder = \"Select\",\n}) => (\n  <Dropdown\n    label={\n      <a className=\"flex-center-vertical\">\n        {variants[selectedIdx]?.display || placeholder}\n      </a>\n    }\n    alwaysClose\n  >\n    {variants.map((v, idx) => (\n      <a\n        key={v.variant}\n        onClick={() => setIdx(idx)}\n        className={\n          variants[selectedIdx]?.variant === v.variant ? \"selected\" : \"\"\n        }\n      >\n        {v.display}\n      </a>\n    ))}\n  </Dropdown>\n);\n\nconst ListHeader: FC<HeaderProps> = ({ variants, selectedIdx, setIdx }) => (\n  <ul className=\"list list--inline divider--vertical\">\n    {variants.map((v, idx) => (\n      <li key={v.variant}>\n        <ConditionalWrapper\n          condition={variants[selectedIdx]?.variant !== v.variant}\n          wrapper={<a key={v.variant} onClick={() => setIdx(idx)} />}\n        >\n          {v.display}\n        </ConditionalWrapper>\n      </li>\n    ))}\n  </ul>\n);\n\nexport const VariantSelector: FC<VariantSelectorProps> = ({\n  disableable = false,\n  title = null,\n  inline = false,\n  onChange = null,\n  enableTitleAppend = null,\n  className = null,\n  list = false,\n  variant = null,\n  variants,\n  name = \"\",\n}) => {\n  const [variantIdx, setIdx] = useState(() => {\n    const idx = variants.findIndex((v) => v.selected || v.variant === variant);\n    return !disableable && idx < 0 ? 0 : idx;\n  });\n\n  useEffect(() => {\n    const idx = variants.findIndex((v) => v.variant === variant);\n    setIdx((curr) => (idx < 0 || idx === curr ? curr : idx));\n  }, [variant, variants]);\n\n  useEffect(() => {\n    if (variantIdx >= 0 && typeof onChange === \"function\")\n      onChange(variants[variantIdx]);\n  }, [variantIdx]);\n\n  const dd = (el, t) =>\n    React.createElement(\n      el,\n      { className: \"secondary-tabs\" },\n      t ? <span className=\"half-margin-right\">{t}</span> : null,\n      list ? (\n        <ListHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      ) : (\n        <DropdownHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      )\n    );\n\n  return (\n    <div\n      className={`form-group${ac(inline, \" inline-variants\")}${ac(className)}`}\n    >\n      {disableable ? (\n        <span className=\"flex-center-vertical\">\n          <label className=\"switch\" htmlFor={`${name}.disableable`}>\n            <input\n              type=\"checkbox\"\n              onChange={() => setIdx((p) => (p >= 0 ? -1 : 0))}\n              checked={variantIdx >= 0}\n              id={`${name}.disableable`}\n            />\n            <span className=\"switch__input\" />\n            <span className=\"switch__label\">{title}</span>\n          </label>\n          {variantIdx >= 0 ? dd(\"span\", enableTitleAppend) : null}\n        </span>\n      ) : (\n        dd(\"div\", title)\n      )}\n      {disableable && variantIdx < 0 ? null : (\n        <div className=\"tabs-wrap panel base-padding-top\">\n          {variants[variantIdx].component}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["DropdownHeader","variants","selectedIdx","setIdx","placeholder","React","Dropdown","label","a","className","display","alwaysClose","map","v","idx","key","variant","onClick","ListHeader","ul","li","ConditionalWrapper","condition","wrapper","VariantSelector","disableable","title","inline","onChange","enableTitleAppend","list","name","useState","findIndex","selected","variantIdx","useEffect","curr","dd","el","t","createElement","span","div","ac","htmlFor","input","type","p","checked","id","component"],"mappings":"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"}