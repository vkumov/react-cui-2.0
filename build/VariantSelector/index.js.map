{"version":3,"file":"index.js","sources":["../../src/VariantSelector/VariantSelector.tsx"],"sourcesContent":["import React, { ReactNode, FC, useEffect, useState } from \"react\";\n\nimport { Dropdown } from \"src/Dropdown\";\nimport { ConditionalWrapper } from \"src/Conditional\";\nimport { appendClass as ac } from \"src/utils\";\n\nexport type Variant = {\n  variant: string;\n  display: string;\n  component: ReactNode;\n  selected?: boolean;\n};\n\nexport type VariantSelectorProps = {\n  variants: Variant[];\n  name?: string;\n  title?: ReactNode;\n  inline?: boolean;\n  onChange?: (value: Variant) => void;\n  disableable?: boolean;\n  enableTitleAppend?: string;\n  className?: string;\n  list?: boolean;\n  variant?: string;\n};\n\ntype HeaderProps = {\n  variants: Variant[];\n  selectedIdx: number;\n  setIdx: (idx: number) => void;\n  placeholder?: string;\n};\n\nconst DropdownHeader: FC<HeaderProps> = ({\n  variants,\n  selectedIdx,\n  setIdx,\n  placeholder = \"Select\",\n}) => (\n  <Dropdown\n    label={\n      <a className=\"flex-center-vertical\">\n        {variants[selectedIdx]?.display || placeholder}\n      </a>\n    }\n    alwaysClose\n  >\n    {variants.map((v, idx) => (\n      <a\n        key={v.variant}\n        onClick={() => setIdx(idx)}\n        className={\n          variants[selectedIdx]?.variant === v.variant ? \"selected\" : \"\"\n        }\n      >\n        {v.display}\n      </a>\n    ))}\n  </Dropdown>\n);\n\nconst ListHeader: FC<HeaderProps> = ({ variants, selectedIdx, setIdx }) => (\n  <ul className=\"list list--inline divider--vertical\">\n    {variants.map((v, idx) => (\n      <li key={v.variant}>\n        <ConditionalWrapper\n          condition={variants[selectedIdx]?.variant !== v.variant}\n          wrapper={<a key={v.variant} onClick={() => setIdx(idx)} />}\n        >\n          {v.display}\n        </ConditionalWrapper>\n      </li>\n    ))}\n  </ul>\n);\n\nexport const VariantSelector: FC<VariantSelectorProps> = ({\n  disableable = false,\n  title = null,\n  inline = false,\n  onChange = null,\n  enableTitleAppend = null,\n  className = null,\n  list = false,\n  variant = null,\n  variants,\n  name = \"\",\n}) => {\n  const [variantIdx, setIdx] = useState(() => {\n    const idx = variants.findIndex((v) => v.selected || v.variant === variant);\n    return !disableable && idx < 0 ? 0 : idx;\n  });\n\n  useEffect(() => {\n    const idx = variants.findIndex((v) => v.variant === variant);\n    setIdx((curr) => (idx < 0 || idx === curr ? curr : idx));\n  }, [variant, variants]);\n\n  useEffect(() => {\n    if (variantIdx >= 0 && typeof onChange === \"function\")\n      onChange(variants[variantIdx]);\n  }, [variantIdx]);\n\n  const dd = (el, t) =>\n    React.createElement(\n      el,\n      { className: \"secondary-tabs\" },\n      t ? <span className=\"half-margin-right\">{t}</span> : null,\n      list ? (\n        <ListHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      ) : (\n        <DropdownHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      )\n    );\n\n  return (\n    <div\n      className={`form-group${ac(inline, \" inline-variants\")}${ac(className)}`}\n    >\n      {disableable ? (\n        <span className=\"flex-center-vertical\">\n          <label className=\"switch\" htmlFor={`${name}.disableable`}>\n            <input\n              type=\"checkbox\"\n              onChange={() => setIdx((p) => (p >= 0 ? -1 : 0))}\n              checked={variantIdx >= 0}\n              id={`${name}.disableable`}\n            />\n            <span className=\"switch__input\" />\n            <span className=\"switch__label\">{title}</span>\n          </label>\n          {variantIdx >= 0 ? dd(\"span\", enableTitleAppend) : null}\n        </span>\n      ) : (\n        dd(\"div\", title)\n      )}\n      {disableable && variantIdx < 0 ? null : (\n        <div className=\"tabs-wrap panel base-padding-top\">\n          {variants[variantIdx].component}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["DropdownHeader","variants","selectedIdx","setIdx","placeholder","Dropdown","label","a","className","display","alwaysClose","map","v","idx","key","variant","onClick","ListHeader","ul","li","ConditionalWrapper","condition","wrapper","VariantSelector","disableable","title","inline","onChange","enableTitleAppend","list","name","variantIdx","useState","findIndex","selected","useEffect","curr","dd","el","t","React","createElement","span","div","ac","htmlFor","input","type","p","checked","id","component"],"mappings":"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"}