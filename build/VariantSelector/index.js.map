{"version":3,"file":"index.js","sources":["../../src/VariantSelector/VariantSelector.tsx"],"sourcesContent":["import React, { ReactNode, FC, useEffect, useState } from \"react\";\n\nimport { Dropdown } from \"src/Dropdown\";\nimport { ConditionalWrapper } from \"src/Conditional\";\nimport { appendClass as ac } from \"src/utils\";\n\nexport type Variant = {\n  variant: string;\n  display: string;\n  component: ReactNode;\n  selected?: boolean;\n};\n\nexport type VariantSelectorProps = {\n  variants: Variant[];\n  name?: string;\n  title?: ReactNode;\n  inline?: boolean;\n  onChange?: (value: Variant) => void;\n  disableable?: boolean;\n  enableTitleAppend?: string;\n  className?: string;\n  list?: boolean;\n  variant?: string;\n};\n\ntype HeaderProps = {\n  variants: Variant[];\n  selectedIdx: number;\n  setIdx: (idx: number) => void;\n  placeholder?: string;\n};\n\nconst DropdownHeader: FC<HeaderProps> = ({\n  variants,\n  selectedIdx,\n  setIdx,\n  placeholder = \"Select\",\n}) => (\n  <Dropdown\n    type=\"link\"\n    header={variants[selectedIdx]?.display || placeholder}\n    alwaysClose\n    className=\"flex-center-vertical\"\n    stopPropagation\n  >\n    {variants.map((v, idx) => (\n      <a\n        key={v.variant}\n        onClick={() => setIdx(idx)}\n        className={\n          variants[selectedIdx]?.variant === v.variant ? \"selected\" : \"\"\n        }\n      >\n        {v.display}\n      </a>\n    ))}\n  </Dropdown>\n);\n\nconst ListHeader: FC<HeaderProps> = ({ variants, selectedIdx, setIdx }) => (\n  <ul className=\"list list--inline divider--vertical\">\n    {variants.map((v, idx) => (\n      <li key={v.variant}>\n        <ConditionalWrapper\n          condition={variants[selectedIdx]?.variant !== v.variant}\n          wrapper={<a key={v.variant} onClick={() => setIdx(idx)} />}\n        >\n          {v.display}\n        </ConditionalWrapper>\n      </li>\n    ))}\n  </ul>\n);\n\nexport const VariantSelector: FC<VariantSelectorProps> = ({\n  disableable = false,\n  title = null,\n  inline = false,\n  onChange = null,\n  enableTitleAppend = null,\n  className = null,\n  list = false,\n  variant = null,\n  variants,\n  name = \"\",\n}) => {\n  const [variantIdx, setIdx] = useState(() => {\n    const idx = variants.findIndex((v) => v.selected || v.variant === variant);\n    return !disableable && idx < 0 ? 0 : idx;\n  });\n\n  useEffect(() => {\n    const idx = variants.findIndex((v) => v.variant === variant);\n    setIdx((curr) => (idx < 0 || idx === curr ? curr : idx));\n  }, [variant, variants]);\n\n  useEffect(() => {\n    if (variantIdx >= 0 && typeof onChange === \"function\")\n      onChange(variants[variantIdx]);\n  }, [variantIdx]);\n\n  const dd = (el, t) =>\n    React.createElement(\n      el,\n      { className: \"secondary-tabs\" },\n      t ? <span className=\"half-margin-right\">{t}</span> : null,\n      list ? (\n        <ListHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      ) : (\n        <DropdownHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      )\n    );\n\n  return (\n    <div\n      className={`form-group${ac(inline, \" inline-variants\")}${ac(className)}`}\n    >\n      {disableable ? (\n        <span className=\"flex-center-vertical\">\n          <label className=\"switch\" htmlFor={`${name}.disableable`}>\n            <input\n              type=\"checkbox\"\n              onChange={() => setIdx((p) => (p >= 0 ? -1 : 0))}\n              checked={variantIdx >= 0}\n              id={`${name}.disableable`}\n            />\n            <span className=\"switch__input\" />\n            <span className=\"switch__label\">{title}</span>\n          </label>\n          {variantIdx >= 0 ? dd(\"span\", enableTitleAppend) : null}\n        </span>\n      ) : (\n        dd(\"div\", title)\n      )}\n      {disableable && variantIdx < 0 ? null : (\n        <div className=\"tabs-wrap panel base-padding-top\">\n          {variants[variantIdx].component}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["DropdownHeader","variants","selectedIdx","setIdx","placeholder","Dropdown","type","header","display","alwaysClose","className","stopPropagation","map","v","idx","a","key","variant","onClick","ListHeader","ul","li","ConditionalWrapper","condition","wrapper","VariantSelector","disableable","title","inline","onChange","enableTitleAppend","list","name","variantIdx","useState","findIndex","selected","useEffect","curr","dd","el","t","React","createElement","span","div","ac","label","htmlFor","input","p","checked","id","component"],"mappings":"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"}