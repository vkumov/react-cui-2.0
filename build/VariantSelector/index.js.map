{"version":3,"file":"index.js","sources":["../../src/VariantSelector/VariantSelector.tsx"],"sourcesContent":["import React, { ReactNode, FC, useEffect, useState } from \"react\";\n\nimport { Dropdown } from \"src/Dropdown\";\nimport { ConditionalWrapper } from \"src/Conditional\";\nimport { appendClass as ac } from \"src/utils\";\n\nexport type Variant = {\n  variant: string;\n  display: string;\n  component: ReactNode;\n  selected?: boolean;\n};\n\nexport type VariantSelectorProps = {\n  variants: Variant[];\n  name?: string;\n  title?: ReactNode;\n  inline?: boolean;\n  onChange?: (value: Variant) => void;\n  disableable?: boolean;\n  enableTitleAppend?: string;\n  className?: string;\n  list?: boolean;\n  variant?: string;\n};\n\ntype HeaderProps = {\n  variants: Variant[];\n  selectedIdx: number;\n  setIdx: (idx: number) => void;\n  placeholder?: string;\n};\n\nconst DropdownHeader: FC<HeaderProps> = ({\n  variants,\n  selectedIdx,\n  setIdx,\n  placeholder = \"Select\",\n}) => (\n  <Dropdown\n    type=\"link\"\n    header={variants[selectedIdx]?.display || placeholder}\n    alwaysClose\n    className=\"flex-center-vertical\"\n    stopPropagation\n  >\n    {variants.map((v, idx) => (\n      <a\n        key={v.variant}\n        onClick={() => setIdx(idx)}\n        className={\n          variants[selectedIdx]?.variant === v.variant ? \"selected\" : \"\"\n        }\n      >\n        {v.display}\n      </a>\n    ))}\n  </Dropdown>\n);\n\nconst ListHeader: FC<HeaderProps> = ({ variants, selectedIdx, setIdx }) => (\n  <ul className=\"list list--inline divider--vertical\">\n    {variants.map((v, idx) => (\n      <li key={v.variant}>\n        <ConditionalWrapper\n          condition={variants[selectedIdx]?.variant !== v.variant}\n          wrapper={<a key={v.variant} onClick={() => setIdx(idx)} />}\n        >\n          {v.display}\n        </ConditionalWrapper>\n      </li>\n    ))}\n  </ul>\n);\n\nexport const VariantSelector: FC<VariantSelectorProps> = ({\n  disableable = false,\n  title = null,\n  inline = false,\n  onChange = null,\n  enableTitleAppend = null,\n  className = null,\n  list = false,\n  variant = null,\n  variants,\n  name = \"\",\n}) => {\n  const [variantIdx, setIdx] = useState(() => {\n    const idx = variants.findIndex((v) => v.selected || v.variant === variant);\n    return !disableable && idx < 0 ? 0 : idx;\n  });\n\n  useEffect(() => {\n    const idx = variants.findIndex((v) => v.variant === variant);\n    setIdx((curr) => (idx < 0 || idx === curr ? curr : idx));\n  }, [variant, variants]);\n\n  useEffect(() => {\n    if (variantIdx >= 0 && typeof onChange === \"function\")\n      onChange(variants[variantIdx]);\n  }, [variantIdx]);\n\n  const dd = (el, t) =>\n    React.createElement(\n      el,\n      { className: \"secondary-tabs\" },\n      t ? <span className=\"half-margin-right\">{t}</span> : null,\n      list ? (\n        <ListHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      ) : (\n        <DropdownHeader\n          variants={variants}\n          selectedIdx={variantIdx}\n          setIdx={setIdx}\n        />\n      )\n    );\n\n  return (\n    <div\n      className={`form-group${ac(inline, \" inline-variants\")}${ac(className)}`}\n    >\n      {disableable ? (\n        <span className=\"flex-center-vertical\">\n          <label className=\"switch\" htmlFor={`${name}.disableable`}>\n            <input\n              type=\"checkbox\"\n              onChange={() => setIdx((p) => (p >= 0 ? -1 : 0))}\n              checked={variantIdx >= 0}\n              id={`${name}.disableable`}\n            />\n            <span className=\"switch__input\" />\n            <span className=\"switch__label\">{title}</span>\n          </label>\n          {variantIdx >= 0 ? dd(\"span\", enableTitleAppend) : null}\n        </span>\n      ) : (\n        dd(\"div\", title)\n      )}\n      {disableable && variantIdx < 0 ? null : (\n        <div className=\"tabs-wrap panel base-padding-top\">\n          {variants[variantIdx].component}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["DropdownHeader","variants","selectedIdx","setIdx","placeholder","Dropdown","type","header","display","alwaysClose","className","stopPropagation","map","v","idx","a","key","variant","onClick","ListHeader","ul","li","ConditionalWrapper","condition","wrapper","VariantSelector","disableable","title","inline","onChange","enableTitleAppend","list","name","useState","findIndex","selected","variantIdx","useEffect","curr","dd","el","t","React","createElement","span","div","ac","label","htmlFor","input","p","checked","id","component"],"mappings":"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"}