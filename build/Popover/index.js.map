{"version":3,"file":"index.js","sources":["../../src/Popover/context.tsx","../../src/Popover/GenericPopover.tsx","../../src/Popover/Popover.tsx","../../src/Popover/PopoverTitle.tsx","../../src/Popover/usePopover.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useContext,\n  type FC,\n  type PropsWithChildren,\n  type ReactNode,\n} from \"react\";\n\ntype PopoverContextProps = {\n  setOverlayState: (show: boolean) => void;\n  setOverlay: (overlay: ReactNode) => void;\n};\n\nconst PopoverContext = createContext<PopoverContextProps>(null!);\n\nexport const PopoverProvider: FC<PropsWithChildren<PopoverContextProps>> = ({\n  children,\n  ...props\n}) => (\n  <PopoverContext.Provider value={props}>{children}</PopoverContext.Provider>\n);\n\nexport const usePopoverContext = () => useContext(PopoverContext);\n","import React, { type HTMLProps, forwardRef, useRef, useEffect } from \"react\";\nimport { useMergeRefs } from \"use-callback-ref\";\nimport { offset } from \"@floating-ui/react\";\nimport cx from \"classnames\";\nimport { TransitionStatus } from \"react-transition-group\";\nimport styles from \"./Popover.module.scss\";\n\nexport const GenericPopover = forwardRef<\n  HTMLDivElement,\n  HTMLProps<HTMLDivElement> & {\n    wrapperClassName?: string;\n    state: TransitionStatus;\n    offset?: Parameters<typeof offset>[0];\n  }\n>(function GenericPopoverRefed(\n  {\n    className,\n    children,\n    wrapperClassName,\n    state,\n    offset: offsetOptions,\n    ...props\n  },\n  ref\n) {\n  const ownRef = useRef<HTMLDivElement>(null);\n  const merged = useMergeRefs([ref, ownRef]);\n\n  useEffect(() => {\n    const r = ownRef.current;\n\n    if (r && offsetOptions && typeof offsetOptions !== \"function\")\n      r.style.setProperty(\n        \"--offset\",\n        `${\n          typeof offsetOptions === \"number\"\n            ? offsetOptions\n            : offsetOptions.mainAxis ?? 4\n        }px`\n      );\n\n    return () => {\n      if (r) r.style.setProperty(\"--offset\", \"4px\");\n    };\n  }, [offsetOptions]);\n\n  return (\n    <div\n      ref={merged}\n      className={cx(styles.wrapper, wrapperClassName, {\n        [styles.disappear]: state === \"exiting\" || state === \"exited\",\n      })}\n      {...props}\n    >\n      <div\n        className={cx(\n          \"panel panel--bordered panel--raised\",\n          styles.body,\n          className\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n});\n","import React, {\n  type FC,\n  type ReactNode,\n  type PropsWithChildren,\n  type ComponentProps,\n  type MutableRefObject,\n  type ReactElement,\n  cloneElement,\n  useState,\n  useCallback,\n  useRef,\n} from \"react\";\nimport { useMergeRefs } from \"use-callback-ref\";\nimport {\n  type Placement,\n  flip,\n  FloatingFocusManager,\n  FloatingPortal,\n  offset,\n  shift,\n  useClick,\n  useDismiss,\n  useFloating,\n  useInteractions,\n  autoUpdate,\n} from \"@floating-ui/react\";\nimport cx from \"classnames\";\nimport { Transition } from \"react-transition-group\";\n\nimport { useLockedBody } from \"src/hooks/useLockedBody\";\nimport { useFloatingContext } from \"src/FloatingProvider\";\n\nimport styles from \"./Popover.module.scss\";\nimport { PopoverProvider, usePopoverContext } from \"./context\";\nimport { GenericPopover } from \"./GenericPopover\";\n\nexport { usePopoverContext };\n\nconst Overlay: FC<\n  PropsWithChildren<{ show: boolean; background?: string; className?: string }>\n> = ({\n  show,\n  children,\n  background = \"var(--cui-background-color)\",\n  className,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  return (\n    <Transition\n      in={show}\n      mountOnEnter\n      unmountOnExit\n      timeout={250}\n      nodeRef={ref}\n    >\n      {(state) => (\n        <div\n          style={{\n            background,\n          }}\n          className={cx(styles.overlay, className, {\n            [styles.disappear]: state === \"exiting\" || state === \"exited\",\n          })}\n          ref={ref}\n        >\n          {children}\n        </div>\n      )}\n    </Transition>\n  );\n};\n\nexport type PopoverProps = PropsWithChildren<{\n  onOpen?: () => unknown;\n  onClose?: () => unknown;\n  showClassName?: string;\n  overlay?: ReactNode;\n  showOverlay?: boolean;\n  placement?: Placement;\n  portalRoot?: ComponentProps<typeof FloatingPortal>[\"root\"];\n  offset?: Parameters<typeof offset>[0];\n  lockBody?: boolean;\n  lockRootId?: string;\n  element: ReactElement;\n  closeRef?: MutableRefObject<() => unknown>;\n  initialFocus?: ComponentProps<typeof FloatingFocusManager>[\"initialFocus\"];\n  guardsFocus?: ComponentProps<typeof FloatingFocusManager>[\"guards\"];\n  modalFocus?: ComponentProps<typeof FloatingFocusManager>[\"modal\"];\n  closeOnFocusOut?: ComponentProps<\n    typeof FloatingFocusManager\n  >[\"closeOnFocusOut\"];\n}>;\n\nexport const Popover: FC<PopoverProps> = ({\n  children,\n  element,\n  onClose,\n  onOpen,\n  showClassName,\n  overlay: overlayProvided,\n  showOverlay: overlayShowProvided,\n  placement,\n  portalRoot,\n  offset: offsetOptions = 4,\n  closeRef,\n  initialFocus,\n  guardsFocus,\n  modalFocus,\n  closeOnFocusOut,\n}) => {\n  const [show, setShow] = useLockedBody(false, \"root\");\n\n  const { x, y, reference, floating, strategy, context } = useFloating({\n    placement,\n    middleware: [\n      offset(offsetOptions),\n      flip(),\n      shift({ padding: { left: 8, right: 8 } }),\n    ],\n    open: show,\n    onOpenChange: (newOpen) => {\n      if (newOpen && typeof onOpen === \"function\") onOpen();\n      if (!newOpen && typeof onClose === \"function\") onClose();\n      setShow(newOpen);\n    },\n    whileElementsMounted: autoUpdate,\n  });\n\n  const dismiss = useDismiss(context);\n  const click = useClick(context);\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([\n    click,\n    dismiss,\n  ]);\n\n  const [overlayShow, setOverlayShow] = useState(overlayShowProvided);\n  const [overlay, setOverlay] = useState(overlayProvided);\n\n  const ref = useMergeRefs([reference, (element as any).ref]);\n\n  const transitionRef = useRef<HTMLDivElement>(null);\n  const floatingRef = useMergeRefs<HTMLDivElement>([transitionRef, floating]);\n\n  const rootCtx = useFloatingContext();\n  portalRoot ??= rootCtx?.rootRef?.current || undefined;\n\n  const closeCb = useCallback(() => setShow(false), [setShow]);\n  if (closeRef) closeRef.current = closeCb;\n\n  return (\n    <>\n      {cloneElement(\n        element,\n        getReferenceProps({\n          ref,\n          ...element.props,\n          className: cx(\n            element.props.className,\n            showClassName ? { [showClassName]: show } : undefined\n          ),\n        })\n      )}\n      <Transition\n        in={show}\n        mountOnEnter\n        unmountOnExit\n        timeout={250}\n        nodeRef={transitionRef}\n      >\n        {(state) => (\n          <FloatingPortal root={portalRoot}>\n            <FloatingFocusManager\n              context={context}\n              initialFocus={initialFocus}\n              guards={guardsFocus}\n              modal={modalFocus}\n              closeOnFocusOut={closeOnFocusOut}\n            >\n              <GenericPopover\n                ref={floatingRef}\n                style={{\n                  position: strategy,\n                  top: y ?? 0,\n                  left: x ?? 0,\n                }}\n                state={state}\n                offset={offsetOptions}\n                {...getFloatingProps()}\n              >\n                <PopoverProvider\n                  setOverlayState={setOverlayShow}\n                  setOverlay={setOverlay}\n                >\n                  <Overlay show={overlayShow || false}>{overlay}</Overlay>\n                  {children}\n                </PopoverProvider>\n              </GenericPopover>\n            </FloatingFocusManager>\n          </FloatingPortal>\n        )}\n      </Transition>\n    </>\n  );\n};\n","import React, { forwardRef, type HTMLProps, type ReactNode } from \"react\";\nimport cx from \"classnames\";\n\ntype PopoverTitleProps = {\n  children: ReactNode;\n  noLine?: boolean;\n} & HTMLProps<HTMLHeadingElement>;\n\nexport const PopoverTitle = forwardRef<HTMLHeadingElement, PopoverTitleProps>(\n  ({ className, noLine, ...props }, ref) => {\n    return (\n      <>\n        <h5\n          ref={ref}\n          className={cx(\"no-margin-bottom\", className)}\n          {...props}\n        />\n        {!noLine && <hr className=\"half-margin-top\" />}\n      </>\n    );\n  }\n);\n\nPopoverTitle.displayName = \"PopoverTitle\";\n","import React, {\n  ComponentProps,\n  ComponentType,\n  createElement,\n  ReactNode,\n  useCallback,\n  useRef,\n} from \"react\";\nimport {\n  flip,\n  FloatingFocusManager,\n  FloatingPortal,\n  offset,\n  shift,\n  useClick,\n  useDismiss,\n  useFloating,\n  useInteractions,\n  autoUpdate,\n} from \"@floating-ui/react\";\nimport { Transition } from \"react-transition-group\";\nimport { useMergeRefs } from \"use-callback-ref\";\n\nimport { useLockedBody } from \"src/hooks/useLockedBody\";\nimport { useFloatingContext } from \"src/FloatingProvider\";\n\nimport { PopoverProps } from \".\";\nimport { GenericPopover } from \"./GenericPopover\";\n\ntype Options = {\n  onOpen?: () => unknown;\n  onClose?: () => unknown;\n  popoverComponent?: ComponentType<ComponentProps<typeof GenericPopover>>;\n} & Pick<\n  PopoverProps,\n  | \"initialFocus\"\n  | \"guardsFocus\"\n  | \"modalFocus\"\n  | \"closeOnFocusOut\"\n  | \"offset\"\n  | \"portalRoot\"\n  | \"placement\"\n>;\n\nexport function usePopover({\n  onClose,\n  onOpen,\n  popoverComponent = GenericPopover,\n  placement,\n  initialFocus,\n  guardsFocus,\n  modalFocus,\n  closeOnFocusOut,\n  offset: offsetOptions = 4,\n  portalRoot,\n}: Options) {\n  const [show, setShow] = useLockedBody(false, \"root\");\n\n  const { x, y, reference, floating, strategy, context, refs } = useFloating({\n    placement,\n    middleware: [\n      offset(offsetOptions),\n      flip(),\n      shift({ padding: { left: 8, right: 8 } }),\n    ],\n    open: show,\n    onOpenChange: (newOpen) => {\n      if (newOpen && typeof onOpen === \"function\") onOpen();\n      if (!newOpen && typeof onClose === \"function\") onClose();\n      setShow(newOpen);\n    },\n    whileElementsMounted: autoUpdate,\n  });\n\n  const dismiss = useDismiss(context);\n  const click = useClick(context);\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([\n    click,\n    dismiss,\n  ]);\n\n  const closeCb = useCallback(() => setShow(false), [setShow]);\n  const openCb = useCallback(() => setShow(true), [setShow]);\n\n  const transitionRef = useRef<HTMLDivElement>(null);\n  const floatingRef = useMergeRefs<HTMLDivElement>([transitionRef, floating]);\n\n  const rootCtx = useFloatingContext();\n  portalRoot ??= rootCtx?.rootRef?.current || undefined;\n\n  const render = (body: ReactNode) => {\n    return (\n      <Transition\n        in={show}\n        mountOnEnter\n        unmountOnExit\n        timeout={250}\n        nodeRef={transitionRef}\n      >\n        {(state) => (\n          <FloatingPortal root={portalRoot}>\n            <FloatingFocusManager\n              context={context}\n              initialFocus={initialFocus}\n              guards={guardsFocus}\n              modal={modalFocus}\n              closeOnFocusOut={closeOnFocusOut}\n            >\n              {createElement(\n                popoverComponent,\n                {\n                  ref: floatingRef,\n                  state,\n                  offset: offsetOptions,\n                  ...getFloatingProps({\n                    style: { position: strategy, top: y ?? 0, left: x ?? 0 },\n                  }),\n                },\n                body\n              )}\n            </FloatingFocusManager>\n          </FloatingPortal>\n        )}\n      </Transition>\n    );\n  };\n\n  return {\n    getReferenceProps,\n    reference,\n    render,\n    isShown: show,\n    refs,\n    close: closeCb,\n    open: openCb,\n  };\n}\n"],"names":["PopoverContext","createContext","PopoverProvider","children","props","Provider","value","usePopoverContext","useContext","_extends","GenericPopover","forwardRef","GenericPopoverRefed","className","wrapperClassName","state","offset","offsetOptions","ref","ownRef","useRef","merged","useMergeRefs","useEffect","r","current","style","setProperty","mainAxis","div","cx","styles","wrapper","disappear","body","Overlay","show","background","Transition","in","mountOnEnter","unmountOnExit","timeout","nodeRef","overlay","Popover","element","onClose","onOpen","showClassName","overlayProvided","showOverlay","overlayShowProvided","placement","portalRoot","closeRef","initialFocus","guardsFocus","modalFocus","closeOnFocusOut","rootCtx","setShow","useLockedBody","x","y","reference","floating","strategy","context","useFloating","middleware","flip","shift","padding","left","right","open","onOpenChange","newOpen","whileElementsMounted","autoUpdate","dismiss","useDismiss","click","useClick","getReferenceProps","getFloatingProps","useInteractions","overlayShow","setOverlayShow","useState","setOverlay","transitionRef","floatingRef","useFloatingContext","rootRef","undefined","closeCb","useCallback","cloneElement","FloatingPortal","root","FloatingFocusManager","guards","modal","position","top","setOverlayState","PopoverTitle","noLine","h5","hr","displayName","usePopover","popoverComponent","refs","openCb","render","createElement","isShown","close"],"mappings":"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"}