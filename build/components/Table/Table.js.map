{"version":3,"file":"Table.js","sources":["../../../components/Table/Table.jsx"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { GenericTable } from \"./GenericTable\";\nimport { DefaultTablePagination } from \"./DefaultTablePagination\";\nimport { DisplayIf } from \"../Conditional\";\n\nimport { appendClass } from \"../../utils\";\n\nconst asArray = (v) => (Array.isArray(v) ? v : [v]);\n\nconst PAGINATION_LOCATION = [\n  \"top-left\",\n  \"bottom-left\",\n  \"bottom-right\",\n  \"top-right\",\n];\n\nconst Table = ({\n  pagination,\n  paginationLocation,\n  paginationProps,\n  data,\n  children,\n  start,\n  ...props\n}) => {\n  const [position, setPosition] = React.useState(\n    typeof start === \"number\" ? start : 0\n  );\n  const [perPage, setPerPage] = React.useState(50);\n  const tbody = React.useMemo(\n    () =>\n      children\n        ? asArray(children).find((child) => child.type === \"tbody\")\n        : null,\n    [children]\n  );\n  const thead = React.useMemo(\n    () =>\n      children\n        ? asArray(children).find((child) => child.type === \"thead\")\n        : null,\n    [children]\n  );\n  const total = React.useMemo(\n    () => (data ? data.length : asArray(tbody.props.children).length) || 0,\n    [data, tbody]\n  );\n  React.useEffect(() => setPosition(0), [data, tbody]);\n\n  return (\n    <>\n      <DisplayIf condition={paginationLocation.includes(\"top-\")}>\n        <div\n          className={`flex base-margin-bottom${appendClass(\n            paginationLocation === \"top-right\",\n            \"flex-right\"\n          )}`}\n        >\n          {React.createElement(pagination, {\n            total,\n            position,\n            onPageChange: (_, p) => setPosition(p),\n            onPerPageChange: (p) => setPerPage(p),\n            paginationProps,\n          })}\n        </div>\n      </DisplayIf>\n      <GenericTable {...props}>\n        {thead}\n        <tbody>\n          {data\n            ? data.slice(position, position + perPage).map((row, rid) => (\n                <tr key={rid}>\n                  {row.map((col, cid) => (\n                    <td key={cid}>{col}</td>\n                  ))}\n                </tr>\n              ))\n            : asArray(tbody.props.children).slice(position, position + perPage)}\n        </tbody>\n      </GenericTable>\n      <DisplayIf condition={paginationLocation.includes(\"bottom-\")}>\n        <div\n          className={`flex base-margin-top${appendClass(\n            paginationLocation === \"bottom-right\",\n            \"flex-right\"\n          )}`}\n        >\n          {React.createElement(pagination, {\n            total,\n            position,\n            onPageChange: (_, p) => setPosition(p),\n            onPerPageChange: (p) => setPerPage(p),\n            perPageUp: true,\n            paginationProps,\n          })}\n        </div>\n      </DisplayIf>\n    </>\n  );\n};\n\nconst ALLOWED_TABLE_CHILD = [\"thead\", \"tbody\"];\nconst allowedChild = (type) => ALLOWED_TABLE_CHILD.includes(type);\n\nTable.propTypes = {\n  pagination: PropTypes.elementType,\n  paginationLocation: PropTypes.oneOf(PAGINATION_LOCATION),\n  paginationProps: PropTypes.exact({\n    size: PropTypes.oneOf([\"small\", \"default\", \"large\"]),\n    rounded: PropTypes.bool,\n    icons: PropTypes.bool,\n    next: PropTypes.node,\n    prev: PropTypes.node,\n    firstAndLast: PropTypes.bool,\n  }),\n  data: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.any)),\n  children: (props, propName, componentName) => {\n    const { [propName]: t } = props;\n\n    const err = new Error(\n      `Invalid prop \\`${propName}\\` supplied to` +\n        ` \\`${componentName}\\`. Validation failed, should be one of:` +\n        ` ${ALLOWED_TABLE_CHILD.join(\", \")}.`\n    );\n    if (Array.isArray(t)) {\n      if (!t.every((ch) => allowedChild(ch.type))) return err;\n    } else if (t && !allowedChild(t.type)) return err;\n    return null;\n  },\n  start: PropTypes.number,\n};\n\nTable.defaultProps = {\n  pagination: DefaultTablePagination,\n  paginationLocation: \"bottom-right\",\n  paginationProps: {\n    icons: true,\n    firstAndLast: true,\n  },\n  data: null,\n  children: null,\n  start: 1,\n};\n\nexport default Table;\n"],"names":["asArray","v","Array","isArray","Table","pagination","paginationLocation","paginationProps","data","children","start","props","position","setPosition","React","useState","perPage","setPerPage","tbody","useMemo","find","child","type","thead","total","length","useEffect","DisplayIf","condition","includes","className","appendClass","createElement","onPageChange","_","p","onPerPageChange","GenericTable","slice","map","row","rid","key","col","cid","perPageUp","ALLOWED_TABLE_CHILD","allowedChild","propTypes","PropTypes","elementType","oneOf","exact","size","rounded","bool","icons","next","node","prev","firstAndLast","arrayOf","any","propName","componentName","t","err","Error","join","every","ch","number","defaultProps","DefaultTablePagination"],"mappings":"8WASA,MAAMA,EAAWC,GAAOC,MAAMC,QAAQF,GAAKA,EAAI,CAACA,GAS1CG,UAASC,WACbA,EADaC,mBAEbA,EAFaC,gBAGbA,EAHaC,KAIbA,EAJaC,SAKbA,EALaC,MAMbA,KACGC,6FAEIC,EAAUC,GAAeC,EAAMC,SACnB,iBAAVL,EAAqBA,EAAQ,IAE/BM,EAASC,GAAcH,EAAMC,SAAS,IACvCG,EAAQJ,EAAMK,QAClB,IACEV,EACIT,EAAQS,GAAUW,KAAMC,GAAyB,UAAfA,EAAMC,MACxC,KACN,CAACb,IAEGc,EAAQT,EAAMK,QAClB,IACEV,EACIT,EAAQS,GAAUW,KAAMC,GAAyB,UAAfA,EAAMC,MACxC,KACN,CAACb,IAEGe,EAAQV,EAAMK,QAClB,KAAOX,EAAOA,EAAKiB,OAASzB,EAAQkB,EAAMP,MAAMF,UAAUgB,SAAW,EACrE,CAACjB,EAAMU,WAETJ,EAAMY,UAAU,IAAMb,EAAY,GAAI,CAACL,EAAMU,IAG3CJ,gCACEA,gBAACa,GAAUC,UAAWtB,EAAmBuB,SAAS,SAChDf,uBACEgB,UAAY,0BAAyBC,EACZ,cAAvBzB,EACA,eAGDQ,EAAMkB,cAAc3B,EAAY,CAC/BmB,MAAAA,EACAZ,SAAAA,EACAqB,aAAc,CAACC,EAAGC,IAAMtB,EAAYsB,GACpCC,gBAAkBD,GAAMlB,EAAWkB,GACnC5B,gBAAAA,MAINO,gBAACuB,EAAiB1B,EACfY,EACDT,6BACGN,EACGA,EAAK8B,MAAM1B,EAAUA,EAAWI,GAASuB,IAAI,CAACC,EAAKC,IACjD3B,sBAAI4B,IAAKD,GACND,EAAID,IAAI,CAACI,EAAKC,IACb9B,sBAAI4B,IAAKE,GAAMD,MAIrB3C,EAAQkB,EAAMP,MAAMF,UAAU6B,MAAM1B,EAAUA,EAAWI,KAGjEF,gBAACa,GAAUC,UAAWtB,EAAmBuB,SAAS,YAChDf,uBACEgB,UAAY,uBAAsBC,EACT,iBAAvBzB,EACA,eAGDQ,EAAMkB,cAAc3B,EAAY,CAC/BmB,MAAAA,EACAZ,SAAAA,EACAqB,aAAc,CAACC,EAAGC,IAAMtB,EAAYsB,GACpCC,gBAAkBD,GAAMlB,EAAWkB,GACnCU,WAAW,EACXtC,gBAAAA,QAQNuC,EAAsB,CAAC,QAAS,SAChCC,EAAgBzB,GAASwB,EAAoBjB,SAASP,GAE5DlB,EAAM4C,UAAY,CAChB3C,WAAY4C,EAAUC,YACtB5C,mBAAoB2C,EAAUE,MAlGJ,CAC1B,WACA,cACA,eACA,cA+FA5C,gBAAiB0C,EAAUG,MAAM,CAC/BC,KAAMJ,EAAUE,MAAM,CAAC,QAAS,UAAW,UAC3CG,QAASL,EAAUM,KACnBC,MAAOP,EAAUM,KACjBE,KAAMR,EAAUS,KAChBC,KAAMV,EAAUS,KAChBE,aAAcX,EAAUM,OAE1B/C,KAAMyC,EAAUY,QAAQZ,EAAUY,QAAQZ,EAAUa,MACpDrD,SAAU,CAACE,EAAOoD,EAAUC,YACjBD,GAAWE,GAAMtD,EAEpBuD,EAAM,IAAIC,MACb,kBAAiBJ,qBACVC,6CACFlB,EAAoBsB,KAAK,aAE7BlE,MAAMC,QAAQ8D,QACXA,EAAEI,MAAOC,GAAOvB,EAAauB,EAAGhD,OAAQ,OAAO4C,OAC/C,GAAID,IAAMlB,EAAakB,EAAE3C,MAAO,OAAO4C,SACvC,MAETxD,MAAOuC,EAAUsB,QAGnBnE,EAAMoE,aAAe,CACnBnE,WAAYoE,EACZnE,mBAAoB,eACpBC,gBAAiB,CACfiD,OAAO,EACPI,cAAc,GAEhBpD,KAAM,KACNC,SAAU,KACVC,MAAO"}