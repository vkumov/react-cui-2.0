import{_ as r,a as e}from"../../tslib.es6-4bca28b2.js";import o,{useState as i,useLayoutEffect as n,useCallback as t}from"react";import{ConditionalWrapper as a}from"../Conditional.js";import{Label as u}from"../Label/index.js";import{InputHelpBaloon as c}from"../InputHelpBaloon.js";import{InputHelpBlock as l}from"../InputHelpBlock.js";import{a as p}from"../../index-59462297.js";import{s}from"../../style-inject.es-1f59c1d0.js";s(".cui .form-group .chips .input{-moz-appearance:none;-webkit-appearance:none;background:var(--cui-form-background);border-radius:var(--cui-border-radius);border:var(--cui-border);box-shadow:none;color:var(--cui-form-value-color);flex-shrink:0;flex:1;font-family:var(--cui-font-stack);font-size:var(--cui-font-size);font-weight:var(--cui-form-value-font-weight);height:var(--cui-form-size);line-height:2.4rem;max-height:var(--cui-form-size);min-height:var(--cui-form-size);order:3;padding:var(--cui-form-padding);padding-left:0;transition:all var(--cui-animate-speed) var(--cui-animate-timing-function);align-items:center;box-sizing:border-box;display:flex;position:relative}.cui .form-group .chips .input.focus,.cui .form-group .chips .input.hover,.cui .form-group .chips .input:focus,.cui .form-group .chips .input:focus-within,.cui .form-group .chips .input:hover{border-color:var(--cui-accent-color)}.cui .form-group .chips .input.focus,.cui .form-group .chips .input:focus,.cui .form-group .chips .input:focus-within{box-shadow:0 0 0 var(--cui-focus-thickness) rgba(var(--cui-focus-color),var(--cui-focus-opacity));opacity:1;outline:transparent var(--cui-focus-thickness);outline-offset:1px;outline-width:thin;outline-style:none}.cui .form-group .chips .input.disabled~label,.cui .form-group .chips .input[disabled]~label{opacity:.5;cursor:not-allowed!important;pointer-events:none!important;z-index:0!important}.cui .form-group .chips .chips-outer{overflow:hidden;white-space:nowrap;padding-left:var(--cui-spacing-qtr)}.cui .form-group .chips .chips-outer>.chips-inner{white-space:normal}.cui .form-group .chips .chips-outer>.chips-inner .label+.label{margin-left:var(--cui-spacing-qtr)}.cui .form-group .chips .input input{border:none;height:calc(var(--cui-form-size) - 2px);max-height:calc(var(--cui-form-size) - 2px);min-height:calc(var(--cui-form-size) - 2px);padding-top:calc(var(--cui-form-padding) - 1px);padding-bottom:calc(var(--cui-form-padding) - 1px);background:transparent}.cui .form-group .chips .input input:focus{box-shadow:unset}.cui .form-group.form-group--error .chips .input{border-color:var(--cui-theme-danger)}");var m=o.forwardRef((function(s,m){var f=s.chipsColor,d=void 0===f?"light":f,v=s.addOnBlur,h=void 0===v||v,g=s.delimiters,b=void 0===g?[13]:g,x=s.label,y=void 0===x?null:x,w=s.allowRepeat,E=void 0!==w&&w,z=s.allowRegex,k=void 0===z?null:z,C=s.valueValidator,N=void 0===C?null:C,A=s.maxChips,j=void 0===A?null:A,R=s.baloon,B=void 0===R?null:R,O=s.className,q=void 0===O?null:O,D=s.id,_=void 0===D?null:D,H=s.error,I=void 0===H?null:H,V=s.value,W=void 0===V?null:V,F=s.onChange,K=s.outerWrap,L=void 0===K||K,P=s.chipsOutside,G=void 0!==P&&P,J=s.renderChip,M=void 0===J?null:J,Q=s.onBlur,S=void 0===Q?null:Q,T=r(s,["chipsColor","addOnBlur","delimiters","label","allowRepeat","allowRegex","valueValidator","maxChips","baloon","className","id","error","value","onChange","outerWrap","chipsOutside","renderChip","onBlur"]),U=i([]),X=U[0],Y=U[1];n((function(){Y((function(r){return W||r||[]}))}),[W]);var Z=t((function(r){("function"!=typeof N||N(r))&&Y((function(e){if(E||!(e||[]).includes(r)){var o=(e||[]).concat(r);return"function"==typeof F&&F(o),o}return e}))}),[E,N,F]),$=t((function(r){var e=b;"string"==typeof e&&(e=Array.prototype.map.call(e,(function(r){return r.charCodeAt(0)})));Array.isArray(e)&&e.includes(r.keyCode)&&(Z(r.target.value),r.target.value="",r.stopPropagation(),r.preventDefault())}),[b,Z]),rr=t((function(r){var e;if(h&&(null===(e=r.target)||void 0===e?void 0:e.value)){var o=r.target.value;k&&RegExp(k).test(o)?Z(o):k||Z(o)}r.target.value="","function"==typeof S&&S(r)}),[h,k,Z,S]),er=t((function(r){Y((function(e){return e=e.filter((function(e,o){return o!==r})),"function"==typeof F&&F(e),e}))}),[F]);return o.createElement(a,{wrapper:o.createElement("div",{className:"form-group"+p(q)+p(I,"form-group--error"),ref:m}),condition:L},o.createElement("div",{className:"form-group__text chips"+p(!L&&q,q)},y?o.createElement("label",{htmlFor:_||T.name},y,B?o.createElement(c,{baloon:B}):null):null,G&&Array.isArray(X)&&X.length?o.createElement("span",{className:"chips-outer qtr-margin-bottom"},o.createElement("span",{className:"chips-inner"},X.map((function(r,e){return M?M({value:r,idx:e,onDelete:function(){return er(e)}}):o.createElement(u,{removable:!0,onRemove:function(){return er(e)},color:d,size:"small",key:r+"-"+e,className:"no-margin-bottom"},r)})))):null,o.createElement("div",{className:"input"},!G&&Array.isArray(X)&&X.length?o.createElement("span",{className:"chips-outer"},o.createElement("span",{className:"chips-inner"},X.map((function(r,e){return o.createElement(u,{removable:!0,onRemove:function(){return er(e)},color:d,size:"small",key:r+"-"+e,className:"no-margin-bottom"},r)})))):null,!j||j&&Array.isArray(X)&&X.length<j?o.createElement("input",e({type:"text",onKeyDown:$,onBlur:rr,id:_||T.name},T)):null)),I?o.createElement(l,{text:I}):null)}));export{m as InputChips};
