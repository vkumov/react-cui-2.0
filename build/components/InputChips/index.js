import{_ as r,a as o}from"../../tslib.es6-4bca28b2.js";import e,{useState as i,useLayoutEffect as n,useCallback as t}from"react";import{ConditionalWrapper as a}from"../Conditional.js";import{Label as u}from"../Label/index.js";import{InputHelpBaloon as c}from"../InputHelpBaloon.js";import{InputHelpBlock as l}from"../InputHelpBlock.js";import{a as p}from"../../index-59462297.js";import{s}from"../../style-inject.es-1f59c1d0.js";s(".cui .form-group .chips .input{-moz-appearance:none;-webkit-appearance:none;background:var(--cui-form-background);border-radius:var(--cui-border-radius);border:var(--cui-border);box-shadow:none;color:var(--cui-form-value-color);flex-shrink:0;flex:1;font-family:var(--cui-font-stack);font-size:var(--cui-font-size);font-weight:var(--cui-form-value-font-weight);height:var(--cui-form-size);line-height:2.4rem;max-height:var(--cui-form-size);min-height:var(--cui-form-size);order:3;padding:var(--cui-form-padding);padding-left:0;transition:all var(--cui-animate-speed) var(--cui-animate-timing-function);align-items:center;box-sizing:border-box;display:flex;position:relative}.cui .form-group .chips .input.focus,.cui .form-group .chips .input.hover,.cui .form-group .chips .input:focus,.cui .form-group .chips .input:focus-within,.cui .form-group .chips .input:hover{border-color:var(--cui-accent-color)}.cui .form-group .chips .input.focus,.cui .form-group .chips .input:focus,.cui .form-group .chips .input:focus-within{box-shadow:0 0 0 var(--cui-focus-thickness) rgba(var(--cui-focus-color),var(--cui-focus-opacity));opacity:1;outline:transparent var(--cui-focus-thickness);outline-offset:1px;outline-width:thin;outline-style:none}.cui .form-group .chips .input.disabled~label,.cui .form-group .chips .input[disabled]~label{opacity:.5;cursor:not-allowed!important;pointer-events:none!important;z-index:0!important}.cui .form-group .chips .chips-outer{overflow:hidden;white-space:nowrap;padding-left:var(--cui-spacing-qtr)}.cui .form-group .chips .chips-outer>.chips-inner{white-space:normal}.cui .form-group .chips .chips-outer>.chips-inner .label+.label{margin-left:var(--cui-spacing-qtr)}.cui .form-group .chips .input input{border:none;height:calc(var(--cui-form-size) - 2px);max-height:calc(var(--cui-form-size) - 2px);min-height:calc(var(--cui-form-size) - 2px);padding-top:calc(var(--cui-form-padding) - 1px);padding-bottom:calc(var(--cui-form-padding) - 1px);background:transparent}.cui .form-group .chips .input input:focus{box-shadow:unset}.cui .form-group.form-group--error .chips .input{border-color:var(--cui-theme-danger)}");var m=e.forwardRef((function(s,m){var f=s.chipsColor,d=void 0===f?"light":f,v=s.addOnBlur,h=void 0===v||v,g=s.delimiters,b=void 0===g?[13]:g,x=s.label,y=void 0===x?null:x,w=s.allowRepeat,z=void 0!==w&&w,E=s.allowRegex,k=void 0===E?null:E,C=s.valueValidator,j=void 0===C?null:C,A=s.maxChips,N=void 0===A?null:A,B=s.baloon,R=void 0===B?null:B,_=s.className,q=void 0===_?null:_,D=s.id,H=void 0===D?null:D,I=s.error,O=void 0===I?null:I,V=s.value,W=void 0===V?null:V,F=s.onChange,K=s.outerWrap,L=void 0===K||K,P=r(s,["chipsColor","addOnBlur","delimiters","label","allowRepeat","allowRegex","valueValidator","maxChips","baloon","className","id","error","value","onChange","outerWrap"]),G=i([]),J=G[0],M=G[1];n((function(){M((function(r){return W||r||[]}))}),[W]);var Q=t((function(r){("function"!=typeof j||j(r))&&M((function(o){if(z||!(o||[]).includes(r)){var e=(o||[]).concat(r);return"function"==typeof F&&F(e),e}return o}))}),[z,j,F]),S=t((function(r){var o=b;"string"==typeof o&&(o=Array.prototype.map.call(o,(function(r){return r.charCodeAt(0)})));Array.isArray(o)&&o.includes(r.keyCode)&&(Q(r.target.value),r.target.value="",r.stopPropagation(),r.preventDefault())}),[b,Q]),T=t((function(r){if(h&&r.target&&r.target.value){var o=r.target.value;k&&RegExp(k).test(o)?Q(o):k||Q(o)}r.target.value="","function"==typeof(null==P?void 0:P.onBlur)&&P.onBlur(r)}),[h,k,Q,P]),U=t((function(r){M((function(o){return o=o.filter((function(o,e){return e!==r})),"function"==typeof F&&F(o),o}))}),[F]);return e.createElement(a,{wrapper:e.createElement("div",{className:"form-group"+p(q)+p(O,"form-group--error"),ref:m}),condition:L},e.createElement("div",{className:"form-group__text chips"+p(!L&&q,q)},y?e.createElement("label",{htmlFor:H||P.name},y,R?e.createElement(c,{baloon:R}):null):null,e.createElement("div",{className:"input"},Array.isArray(J)&&J.length?e.createElement("span",{className:"chips-outer"},e.createElement("span",{className:"chips-inner"},J.map((function(r,o){return e.createElement(u,{removable:!0,onRemove:function(){return U(o)},color:d,size:"small",key:r+"-"+o,className:"no-margin-bottom"},r)})))):null,!N||N&&Array.isArray(J)&&J.length<N?e.createElement("input",o({type:"text",onKeyDown:S,onBlur:T,id:H||P.name},P)):null)),O?e.createElement(l,{text:O}):null)}));export{m as InputChips};
