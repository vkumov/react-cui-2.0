import t from"react";import"prop-types";import{c as n,a as e,d as o,e as i}from"../../tslib.es6-633881f1.js";import{e as r,E as l}from"../../index-74b9c8d0.js";import"../../style-inject.es-1f59c1d0.js";import{Button as a}from"../Button.js";import"formik";import"../Conditional.js";import"../InputHelpBlock.js";import"../Input.js";import"react-dom";import{ModalBody as u}from"./Body.js";import{ModalFooter as c}from"./Footer.js";import{Modal as m}from"./Modal.js";import"react-modal";import"./Header.js";import{ConfirmationModal as s}from"./ConfirmationModal.js";import{PromptModal as f}from"./PromptModal.js";var p=function(){var p=t.useState([]),d=p[0],y=p[1],v=t.useCallback((function(t){return y((function(o){return n(o,[e({id:Date.now(),shown:!0},t)])}))}),[]),h=t.useCallback((function(t){y((function(n){return n.map((function(n){return n.id===t?e(e({},n),{shown:!1}):n}))}))}),[]),j=t.useCallback((function(t){y((function(n){return n.filter((function(n){return n.id!==t}))}))}),[]),b=t.useCallback((function(t){h(t),setTimeout((function(){return j(t)}),500)}),[h,j]);return t.useEffect((function(){r.on(l.SHOW_MODAL,(function(t){return v(t)}))}),[v]),d.length?t.createElement(t.Fragment,null,d.map((function(n){if("notification"===n.modalType)return t.createElement(m,{key:n.id,isOpen:n.shown,closeIcon:!0,closeHandle:function(){return b(n.id)},title:n.title},t.createElement(u,null,n.body),t.createElement(c,null,t.createElement(a,{color:n.buttonColor||"light",onClick:function(){return b(n.id)}},n.button)));if("prompt"===n.modalType){if(void 0!==n.options){var e=n.options,r=e.initial,l=void 0===r?"":r,p=e.type,d=void 0===p?"text":p,y=e.hint,v=void 0===y?void 0:y,h=e.validate,j=void 0===h?void 0:h;return t.createElement(f,{key:n.id,isOpen:n.shown,onClose:function(){return b(n.id)},onSave:n.cb,title:n.title,question:n.question,initial:l,type:d,hint:v,validate:j})}return t.createElement(f,{key:n.id,isOpen:n.shown,onClose:function(){return b(n.id)},onSave:n.cb,title:n.title,question:n.question,initial:n.initial,type:n.type,hint:n.hint})}return"confirmation"===n.modalType?t.createElement(s,{key:n.id,isOpen:n.shown,prompt:n.prompt,confirmHandle:function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,n.onConfirm()];case 1:return t.sent()&&b(n.id),[2,!0]}}))}))},closeHandle:function(){return b(n.id)},confirmText:n.confirmText,confirmType:n.confirmType}):null}))):null};export{p as ConfirmationListener,p as DynamicModal};
