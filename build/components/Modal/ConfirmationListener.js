import{d as t,a as n,b as e,c as o}from"../../tslib.es6-4bca28b2.js";import i,{cloneElement as r}from"react";import{Button as l}from"../Button/index.js";import{e as u,E as c}from"../../eventManager-d70916fd.js";import{ModalBody as a}from"./Body.js";import{ModalFooter as s}from"./Footer.js";import{Modal as d}from"./Modal.js";import{ConfirmationModal as m}from"./ConfirmationModal.js";import{PromptModal as f}from"./PromptModal.js";import"../../index-59462297.js";import"../../style-inject.es-1f59c1d0.js";import"react-dom";import"react-modal";import"../Conditional.js";import"./Header.js";import"../Input/index.js";import"../InputHelpBlock.js";var p=function(){var p=i.useState([]),y=p[0],v=p[1],b=i.useCallback((function(e){return v((function(o){return t(t([],o),[n({id:Date.now(),shown:!0},e)])}))}),[]),h=i.useCallback((function(t){v((function(e){return e.map((function(e){return e.id===t?n(n({},e),{shown:!1}):e}))}))}),[]),C=i.useCallback((function(t){v((function(n){return n.filter((function(n){return n.id===t&&"function"==typeof n.onClosed&&n.onClosed(),n.id!==t}))}))}),[]),j=i.useCallback((function(t){h(t),setTimeout((function(){return C(t)}),500)}),[h,C]);return i.useEffect((function(){u.on(c.SHOW_MODAL,(function(t){return b(t)}))}),[b]),y.length?i.createElement(i.Fragment,null,y.map((function(t){if("dynamic"===t.modalType)return i.createElement(d,n({},t.modalProps,{key:t.id,isOpen:t.shown,closeIcon:!0,closeHandle:function(){return j(t.id)},title:t.title}),t.fullBody?"function"==typeof t.fullBody?t.fullBody({close:function(){return j(t.id)}}):r(t.fullBody,{close:function(){return j(t.id)}}):i.createElement(i.Fragment,null,i.createElement(a,null,t.body),i.createElement(s,null,t.buttons.map((function(n,e){return i.createElement(l,{key:e,color:n.color||"light",onClick:function(e){"function"==typeof n.onClick?n.onClick(e,(function(){return j(t.id)})):j(t.id)}},n.text)})))));if("notification"===t.modalType)return i.createElement(d,{key:t.id,isOpen:t.shown,closeIcon:!0,closeHandle:function(){return j(t.id)},title:t.title},i.createElement(a,null,t.body),i.createElement(s,null,i.createElement(l,{color:t.buttonColor||"light",onClick:function(){return j(t.id)}},t.button)));if("prompt"===t.modalType){if(void 0!==t.options){var u=t.options,c=u.initial,p=void 0===c?"":c,y=u.type,v=void 0===y?"text":y,b=u.hint,h=void 0===b?void 0:b,C=u.validate,k=void 0===C?void 0:C;return i.createElement(f,{key:t.id,isOpen:t.shown,onClose:function(){return j(t.id)},onSave:t.cb,title:t.title,question:t.question,initial:p,type:v,hint:h,validate:k})}return i.createElement(f,{key:t.id,isOpen:t.shown,onClose:function(){return j(t.id)},onSave:t.cb,title:t.title,question:t.question,initial:t.initial,type:t.type,hint:t.hint})}return"confirmation"===t.modalType?i.createElement(m,{key:t.id,isOpen:t.shown,prompt:t.prompt,confirmHandle:function(){return e(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.onConfirm()];case 1:return n.sent()&&j(t.id),[2,!0]}}))}))},closeHandle:function(){return j(t.id)},confirmText:t.confirmText,confirmType:t.confirmType}):null}))):null};export{p as ConfirmationListener,p as DynamicModal};
