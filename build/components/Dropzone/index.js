import{_ as e,a as r}from"../../tslib.es6-4bca28b2.js";import t,{useState as o,useMemo as a,useCallback as l,useEffect as n}from"react";import i from"react-dropzone";import{a as c}from"../../index-59462297.js";import{s}from"../../style-inject.es-1f59c1d0.js";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */var m=function(e,r){if("string"==typeof e)return h(e);if("number"==typeof e)return v(e,r);return null},p=v,d=h,f=/\B(?=(\d{3})+(?!\d))/g,u=/(?:\.0*|(\.[^0]+)0+)$/,g={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},b=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function v(e,r){if(!Number.isFinite(e))return null;var t=Math.abs(e),o=r&&r.thousandsSeparator||"",a=r&&r.unitSeparator||"",l=r&&void 0!==r.decimalPlaces?r.decimalPlaces:2,n=Boolean(r&&r.fixedDecimals),i=r&&r.unit||"";i&&g[i.toLowerCase()]||(i=t>=g.pb?"PB":t>=g.tb?"TB":t>=g.gb?"GB":t>=g.mb?"MB":t>=g.kb?"KB":"B");var c=(e/g[i.toLowerCase()]).toFixed(l);return n||(c=c.replace(u,"$1")),o&&(c=c.replace(f,o)),c+a+i}function h(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var r,t=b.exec(e),o="b";return t?(r=parseFloat(t[1]),o=t[4].toLowerCase()):(r=parseInt(e,10),o="b"),Math.floor(g[o]*r)}m.format=p,m.parse=d;s(".cui .dropzone{border:1px dashed #dfdfdf;cursor:pointer;text-align:center;height:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);color:#58585b;position:relative;background:#fff;box-shadow:none;display:block;margin:0;padding:10px}.cui .dropzone:focus{outline:none;box-shadow:inset 0 0 0 2px rgba(1,124,173,.25)}.cui .dropzone:hover,.dropzone.dropzone-drag-hover{border-color:#049fd9}.cui .dropzone.dropzone--loose{padding:20px}.cui .dropzone.dropzone--compressed{padding:5px}.cui .dropzone:hover .file-drop__icon,.dropzone.dropzone-drag-hover .file-drop__icon{color:#049fd9}.cui .dropzone .dropzone-message .file-drop__icon{font-size:2rem}.cui .dropzone .dropzone-previews .file-drop__filecnt{text-align:left;color:#9e9ea2;margin-top:1.3125rem}.cui .dropzone .file-drop__card{margin-bottom:.625rem}.cui .form-group--error .dropzone{padding-right:40px;border-color:#e2231a}");var x=function(e){var r=e.file,o=e.i,a=e.removeFile,l=e.inline;return t.createElement("div",{className:"file-drop__card col-lg-4 col-md-6 col-sm-6",key:o+"-"+r.name},t.createElement("div",{className:"panel panel--bordered hover-emboss--small",onClick:function(e){return e.stopPropagation()}},l?t.createElement("div",{className:"panel__body flex flex-row"},t.createElement("div",{className:"text-left flex-fill",style:{maxWidth:"calc(100% - 20px)"}},t.createElement("div",{className:"text-ellipsis"},r.name),t.createElement("small",{style:{whiteSpace:"nowrap"}},m.format(r.size,{unitSeparator:" "}))),t.createElement("a",{className:"link pull-right",onClick:function(){return a(o)}},t.createElement("span",{className:"icon-close",title:"Remove the file."}))):t.createElement("div",{className:"panel__body"},t.createElement("a",{className:"link pull-right",style:{marginRight:"5px"},onClick:function(){return a(o)}},t.createElement("span",{className:"icon-close",title:"Remove the file."})),t.createElement("div",{className:"text-ellipsis half-margin-bottom"},r.name),t.createElement("span",{className:"file-icon text-muted icon-file-o qtr-margin-right"}),t.createElement("small",null,m.format(r.size,{unitSeparator:" "})))))},E=function(e){var r=e.inline,o=e.accept,a=e.maxFileSize;return r?t.createElement("div",{className:"dropzone-message flex flex-row flex-center-vertical"},t.createElement("h5",{className:"text-muted text-left flex-fill no-margin"},"Click Here or Drop Files to Upload"),o&&t.createElement("span",{className:"text-muted text-small half-margin-right"},"Allowed files: ","string"==typeof o?o.split(",").join(", "):o),t.createElement("span",{className:"file-drop__icon icon-upload"})):t.createElement("div",{className:"dropzone-message"},t.createElement("span",{className:"file-drop__icon icon-upload"}),t.createElement("h4",{className:"text-muted"},"Click Here or Drop Files to Upload"),o&&t.createElement("div",{className:"text-muted"},"Allowed files: ",o.split(",").join(", ")),a&&t.createElement("div",{className:"text-muted"},"Max file size: ",m.format(a,{unitSeparator:" "})))},z=function(e){var r=e.files,o=e.inline,a=e.showTotalSelected,l=e.removeFile;return Array.isArray(r)&&r.length?t.createElement("div",{className:"dropzone-previews"},t.createElement("div",{className:"file-drop__container container--fluid"},t.createElement("div",{className:"row"},r.map((function(e,r){return t.createElement(x,{key:r,file:e,i:r,inline:o,removeFile:l})})))),a?t.createElement("div",{className:"file-drop__filecnt"},r.length," selected"):null):null},N=function(s){var p=s.error,d=s.loose,f=s.compressed,u=s.inline,g=s.label,b=s.name,v=s.value,h=s.maxFileSize,x=s.maxFiles,N=s.onChange,_=s.showTotalSelected,y=e(s,["error","loose","compressed","inline","label","name","value","maxFileSize","maxFiles","onChange","showTotalSelected"]),w=o(void 0),k=w[0],F=w[1],S=a((function(){return h?m.parse(h):null}),[h]),A=a((function(){var e="";if(d&&(e="dropzone--loose"),f&&(e="dropzone--compressed"),u&&Array.isArray(v)&&v.length)switch(e){case"dropzone--loose":e+=" half-padding-bottom";break;case"dropzone--compressed":e+=" no-padding-bottom";break;default:e+=" qtr-padding-bottom"}return e}),[d,f,v,u]),C=l((function(e){S&&(e=e.filter((function(e){return e.size<=S}))),x&&e.length>x&&(e=e.slice(0,x)),F(e)}),[S,x]),B=l((function(e){F((function(r){return Array.isArray(r)?r.filter((function(r,t){return e!==t})):r}))}),[]);return n((function(){"function"==typeof N&&N(k)}),[k]),t.createElement("div",{className:"form-group"+c(p,"form-group--error")},t.createElement("div",{className:"form-group__text"},g?t.createElement("label",{htmlFor:b},g):null,t.createElement(i,r({},y,{onDrop:C,maxSize:S}),(function(e){var o=e.getRootProps,a=e.getInputProps;return t.createElement("div",r({className:"dropzone "+A},o()),t.createElement("input",r({},a())),t.createElement(z,{files:k,showTotalSelected:_,inline:u,removeFile:B}),Array.isArray(k)&&k.length?null:t.createElement(E,{maxFileSize:S,inline:u,accept:y.accept}))}))),p?t.createElement("div",{className:"help-block text-danger",role:"alert"},t.createElement("span",null,p)):null)};export{N as Dropzone};
