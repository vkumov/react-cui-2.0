import e from"react";import r from"prop-types";import{c as o}from"../tslib.es6-633881f1.js";import{a}from"../index-74b9c8d0.js";import{s as i}from"../style-inject.es-1f59c1d0.js";import{getIn as n}from"formik";import{InputHelpBlock as t}from"./InputHelpBlock.js";import{Label as u}from"./Label.js";import{InputHelpBaloon as l}from"./InputHelpBaloon.js";i(".cui .form-group .chips .input{-moz-appearance:none;-webkit-appearance:none;background:var(--cui-form-background);border-radius:var(--cui-border-radius);border:var(--cui-border);box-shadow:none;color:var(--cui-form-value-color);flex-shrink:0;flex:1;font-family:var(--cui-font-stack);font-size:var(--cui-font-size);font-weight:var(--cui-form-value-font-weight);height:var(--cui-form-size);line-height:2.4rem;max-height:var(--cui-form-size);min-height:var(--cui-form-size);order:3;padding:var(--cui-form-padding);padding-left:0;transition:all var(--cui-animate-speed) var(--cui-animate-timing-function);align-items:center;box-sizing:border-box;display:flex;position:relative}.cui .form-group .chips .input.focus,.cui .form-group .chips .input.hover,.cui .form-group .chips .input:focus,.cui .form-group .chips .input:hover{border-color:var(--cui-accent-color)}.cui .form-group .chips .input.focus,.cui .form-group .chips .input:focus{box-shadow:0 0 0 var(--cui-focus-thickness) rgba(var(--cui-focus-color),var(--cui-focus-opacity));opacity:1;outline:transparent var(--cui-focus-thickness);outline-offset:1px;outline-width:thin;outline-style:none}.cui .form-group .chips .input.disabled~label,.cui .form-group .chips .input[disabled]~label{opacity:.5;cursor:not-allowed!important;pointer-events:none!important;z-index:0!important}.cui .form-group .chips .chips-outer{overflow:hidden;white-space:nowrap;padding-left:var(--cui-form-padding)}.cui .form-group .chips .chips-outer>.chips-inner{white-space:normal}.cui .form-group .chips .input input{border:none;height:calc(var(--cui-form-size) - 2px);max-height:calc(var(--cui-form-size) - 2px);min-height:calc(var(--cui-form-size) - 2px);padding-top:calc(var(--cui-form-padding) - 1px);padding-bottom:calc(var(--cui-form-padding) - 1px);background:transparent}.cui .form-group .chips .input input:focus{box-shadow:unset}.cui .form-group.form-group--error .chips .input{border-color:var(--cui-theme-danger)}");var c=e.forwardRef((function(r,i){var c=r.chipsColor,s=void 0===c?"primary":c,p=r.addOnBlur,m=void 0===p||p,f=r.delimiters,d=void 0===f?[13]:f,v=r.label,g=void 0===v?null:v,h=r.allowRepeat,b=void 0!==h&&h,y=r.allowRegex,x=void 0===y?null:y,w=r.valueValidator,k=void 0===w?null:w,z=r.maxChips,E=void 0===z?null:z,N=r.baloon,A=void 0===N?null:N,C=r.className,j=void 0===C?null:C,R=r.id,B=void 0===R?null:R,O=r.field,F=r.form,T=F.touched,V=F.errors,D=F.setFieldValue,H=F.setFieldTouched,I=e.useState(!1),_=I[0],q=I[1],K=e.useCallback((function(e){"function"==typeof k&&!1===(e=k(e))||(b?D(O.name,o(O.value,[e])):O.value.includes(e)||D(O.name,o(O.value,[e])))}),[b,k,O.name,O.value]),L=e.useCallback((function(e){var r=d;"string"==typeof r&&(r=Array.prototype.map.call(r,(function(e){return e.charCodeAt(0)})));Array.isArray(r)&&r.includes(e.keyCode)&&(K(e.target.value),e.target.value="",e.stopPropagation(),e.preventDefault())}),[d,K]),P=e.useCallback((function(e){if(m&&e.target&&e.target.value){var r=e.target.value;x&&RegExp(x).test(r)?K(r):x||K(r)}e.target.value="",q(!1),O.onBlur(e)}),[m,x,K,O]),S=e.useCallback((function(e){var r=o(O.value);r.splice(e,1),H(O.name,!0),D(O.name,r)}),[O.name,O.value]);return e.useEffect((function(){!Number.isNaN(E)&&Array.isArray(O.value)&&O.value.length>=E&&q(!1)}),[O.value,E]),e.createElement("div",{className:"form-group"+a(j)+a(n(T,O.name)&&n(V,O.name),"form-group--error"),ref:i},e.createElement("div",{className:"form-group__text chips"},g?e.createElement("label",{htmlFor:B||O.name},g,A?e.createElement(l,{baloon:A}):null):null,e.createElement("div",{className:"input"+a(_,"focus")},Array.isArray(O.value)&&O.value.length?e.createElement("span",{className:"chips-outer"},e.createElement("span",{className:"chips-inner"},O.value.map((function(r,o){return e.createElement(u,{removable:!0,onRemove:function(){return S(o)},color:s,size:"tiny",key:r+"-"+o,className:"qtr-margin-bottom"},r)})))):null,!E||E&&Array.isArray(O.value)&&O.value.length<E?e.createElement("input",{type:"text",onKeyDown:L,onBlur:P,onFocus:function(){return q(!0)},id:B||O.name}):null)),n(T,O.name)&&n(V,O.name)?e.createElement(t,{text:n(V,O.name)}):null)}));c.propTypes={label:r.node,chipsColor:r.oneOf(["primary","secondary","tertiary","success","info","warning-alt","warning","danger","dark","light"]),addOnBlur:r.bool,allowRepeat:r.bool,allowRegex:r.string,delimiters:r.oneOfType([r.string,r.arrayOf(r.number)]),valueValidator:r.func,maxChips:r.number,baloon:r.string,className:r.string,id:r.string};export{c as InputChips};
