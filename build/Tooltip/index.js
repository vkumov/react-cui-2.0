import r,{forwardRef as d,cloneElement as v,useState as T,useRef as g,useMemo as I}from"react";import{useMergeRefs as h,useFloating as C,offset as O,flip as W,shift as $,arrow as M,useRole as j,useHover as k,useInteractions as D,FloatingPortal as H}from"@floating-ui/react";import{Transition as S}from"react-transition-group";import{useFloatingContext as q}from"../FloatingProvider/index.js";const z=d(function({className:t,children:e,...l},o){return r.createElement("div",{ref:o,className:"tooltip__wrapper",...l},r.createElement("div",{className:t},e))});function x(t){const[e,l]=T(!1),o=g(null),n=C({middleware:[O(6),W(),$({padding:{left:8,right:8}}),M({element:o})],open:e,onOpenChange:l,placement:t}),p=j(n.context,{role:"tooltip"}),a=k(n.context,{delay:{open:500,close:0},move:!1}),{getReferenceProps:i,getFloatingProps:s}=D([p,a]);return I(()=>({...n,getFloatingProps:s,show:e,getReferenceProps:i,arrowRef:o}),[s,e,i,o,n])}const w=({children:t,x:e,y:l,show:o,strategy:n,getFloatingProps:p,middlewareData:a,arrowRef:i,placement:s,root:E,portalId:y,refs:F})=>{const{x:c,y:m}=a.arrow||{x:0,y:0},f=g(null),P={top:"bottom",right:"left",bottom:"top",left:"right"}[s.split("-")[0]],{root:N,id:_}=q({root:E,portalId:y,fallbackPortalId:"--cui-tooltip-portal"}),b=h([F.setFloating,f]);return r.createElement(H,{root:N,id:_},r.createElement(S,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:200,nodeRef:f},u=>r.createElement(z,{ref:b,style:{position:n,top:l??0,left:e??0},...p({className:`tooltip__body ${u==="exiting"||u==="exited"?"tooltip--disappear":"tooltip--appear"}`})},t,r.createElement("div",{ref:i,className:"tooltip__arrow",style:{left:c!=null?`${c}px`:"",top:m!=null?`${m}px`:"",right:"",bottom:"",[P]:"-4px"}}))))},R=d(({children:t,tooltip:e,placement:l="top",...o},n)=>{const{getReferenceProps:p,refs:a,...i}=x(l),s=h([a.setReference,n,t.ref]);return r.createElement(r.Fragment,null,v(t,p({ref:s,...t.props,...o})),r.createElement(w,{refs:a,...i},e))});R.displayName="WithTooltip";export{w as TooltipWrapper,R as WithTooltip,x as useTooltip};
//# sourceMappingURL=index.js.map
