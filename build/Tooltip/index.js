import{jsx as a,jsxs as u,Fragment as I}from"react/jsx-runtime";import{forwardRef as g,cloneElement as C,useState as E,useRef as h,useMemo as O}from"react";import{useMergeRefs as x,useFloating as W,offset as $,flip as j,shift as M,arrow as k,useRole as D,useHover as H,useInteractions as S,FloatingPortal as U}from"@floating-ui/react";import{Transition as q}from"react-transition-group";import{useFloatingContext as z}from"../FloatingProvider/index.js";const A=g(function({className:t,children:e,...r},o){return a("div",{ref:o,className:"tooltip__wrapper",...r,children:a("div",{className:t,children:e})})});function w(t){const[e,r]=E(!1),o=h(null),l=W({middleware:[$(6),j(),M({padding:{left:8,right:8}}),k({element:o})],open:e,onOpenChange:r,placement:t}),s=D(l.context,{role:"tooltip"}),i=H(l.context,{delay:{open:500,close:0},move:!1}),{getReferenceProps:n,getFloatingProps:p}=S([s,i]);return O(()=>({...l,getFloatingProps:p,show:e,getReferenceProps:n,arrowRef:o}),[p,e,n,o,l])}const R=({children:t,x:e,y:r,show:o,strategy:l,getFloatingProps:s,middlewareData:i,arrowRef:n,placement:p,root:F,portalId:P,refs:b})=>{const{x:c,y:f}=i.arrow||{x:0,y:0},d=h(null),N={top:"bottom",right:"left",bottom:"top",left:"right"}[p.split("-")[0]],{root:_,id:v}=z({root:F,portalId:P,fallbackPortalId:"--cui-tooltip-portal"}),T=x([b.setFloating,d]);return a(U,{root:_,id:v,children:a(q,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:200,nodeRef:d,children:m=>u(A,{ref:T,style:{position:l,top:r??0,left:e??0},...s({className:`tooltip__body ${m==="exiting"||m==="exited"?"tooltip--disappear":"tooltip--appear"}`}),children:[t,a("div",{ref:n,className:"tooltip__arrow",style:{left:c!=null?`${c}px`:"",top:f!=null?`${f}px`:"",right:"",bottom:"",[N]:"-4px"}})]})})})},y=g(({children:t,tooltip:e,placement:r="top",...o},l)=>{const{getReferenceProps:s,refs:i,...n}=w(r),p=x([i.setReference,l,t.ref]);return u(I,{children:[C(t,s({ref:p,...t.props,...o})),a(R,{refs:i,...n,children:e})]})});y.displayName="WithTooltip";export{R as TooltipWrapper,y as WithTooltip,w as useTooltip};
//# sourceMappingURL=index.js.map
