{"version":3,"file":"index.js","sources":["../../src/Tabs/Tabs.tsx"],"sourcesContent":["import React, {\n  MutableRefObject,\n  forwardRef,\n  type FC,\n  type HTMLProps,\n  type ReactNode,\n} from \"react\";\n\nimport { ConditionalWrapper, DisplayIf } from \"src/Conditional\";\nimport { usePrevious } from \"src/hooks/usePrevious\";\nimport { appendClass as ac } from \"src/utils\";\n\ntype TabId = number | string;\n\nconst firstDefined = (...args) =>\n  args.find((el) => typeof el !== \"undefined\" && el !== null);\n\ninterface TabProps {\n  id: TabId;\n  active?: boolean;\n  title: ReactNode;\n  children: ReactNode;\n  className?: string;\n  activeClassName?: string;\n  unmountInactive?: boolean;\n}\n\nexport const Tab: FC<TabProps> = ({\n  active = false,\n  className = null,\n  activeClassName = null,\n  unmountInactive = false,\n  children,\n}) => {\n  if (!active && unmountInactive) return null;\n  return (\n    <div\n      className={`tab-pane${ac(active, \"active\")}${ac(\n        active && activeClassName,\n        activeClassName\n      )}${ac(className)}`}\n    >\n      {children}\n    </div>\n  );\n};\n\nconst isActive = (openTab, id: TabId, idx: number) =>\n  openTab === null ? idx === 0 : openTab === firstDefined(id, idx);\n\ninterface TabsHeaderProps {\n  tabsClassName?: string;\n  center?: boolean;\n  right?: boolean;\n  justified?: boolean;\n  embossed?: boolean;\n  bordered?: boolean;\n  vertical?: boolean;\n  sticky?: boolean;\n  inline?: boolean;\n  openTab?: TabId;\n  onTabChange: (tab: TabId) => void;\n  children: ReactNode;\n}\n\nexport const TabsHeader = forwardRef<HTMLUListElement, TabsHeaderProps>(\n  (\n    {\n      tabsClassName = null,\n      center = false,\n      right = false,\n      justified = false,\n      embossed = false,\n      bordered = false,\n      vertical = false,\n      inline = false,\n      openTab = null,\n      sticky = false,\n      onTabChange,\n      children,\n    },\n    ref\n  ) => (\n    <ul\n      ref={ref}\n      className={`tabs${ac(tabsClassName)}${ac(center, \"tabs--centered\")}${ac(\n        right,\n        \"tabs--right\"\n      )}${ac(justified, \"tabs--justified\")}${ac(\n        embossed,\n        \"tabs--embossed\"\n      )}${ac(bordered, \"tabs--bordered\")}${ac(vertical, \"tabs--vertical\")}${ac(\n        inline,\n        \"tabs--inline\"\n      )}`}\n      style={sticky ? { position: \"sticky\", top: \"0\" } : {}}\n    >\n      {React.Children.map(children, (child, idx) => {\n        if (!React.isValidElement<TabProps>(child)) return child;\n\n        const {\n          props: { id, title },\n        } = child;\n        return (\n          <li\n            className={`tab${ac(isActive(openTab, id, idx), \"active\")}`}\n            key={firstDefined(id, idx)}\n          >\n            <a onClick={() => onTabChange(firstDefined(id, idx))}>{title}</a>\n          </li>\n        );\n      })}\n    </ul>\n  )\n);\n\nTabsHeader.displayName = \"TabsHeader\";\n\ninterface ColumnSizes {\n  sm?: number;\n  md?: number;\n  lg?: number;\n  xl?: number;\n}\n\ntype ColumnSize = number | string | ColumnSizes;\n\ntype Column = {\n  columnWidth?: ColumnSize;\n} & React.HTMLProps<HTMLDivElement>;\n\ninterface TabsProps {\n  children: ReactNode;\n  defaultTab?: TabId;\n  tabsClassName?: string;\n  contentClassName?: string;\n  center?: boolean;\n  right?: boolean;\n  justified?: boolean;\n  embossed?: boolean;\n  bordered?: boolean;\n  vertical?: boolean;\n  leftColumn?: Column;\n  rightColumn?: Column;\n  rowProps?: HTMLProps<HTMLDivElement>;\n  sticky?: boolean;\n  inline?: boolean;\n  renderHeader?: (header: JSX.Element) => JSX.Element;\n  renderBody?: (body: JSX.Element) => JSX.Element;\n  onTabChange?: (tab: TabId) => void;\n  beforeTabChange?: (\n    oldTab: TabId,\n    newTab: TabId\n  ) => boolean | Promise<boolean>;\n  bodyRef?: MutableRefObject<HTMLDivElement>;\n  headerRef?: MutableRefObject<HTMLUListElement>;\n}\n\nconst composeColumnSize = (columnWidth: ColumnSize): string => {\n  if (typeof columnWidth === \"string\" || typeof columnWidth === \"number\")\n    return `col-${columnWidth}`;\n\n  return Object.keys(columnWidth)\n    .map((k) => `col-${k}-${columnWidth[k]}`)\n    .join(\" \");\n};\n\nconst ColumnWrap: FC<Column> = ({ columnWidth, className, ...props }) => (\n  <div\n    className={`${composeColumnSize(columnWidth)}${ac(className)}`}\n    {...props}\n  />\n);\n\nexport const Tabs: FC<TabsProps> = ({\n  defaultTab = null,\n  tabsClassName = null,\n  contentClassName = null,\n  center = false,\n  right = false,\n  justified = false,\n  embossed = false,\n  bordered = false,\n  vertical = false,\n  sticky = false,\n  inline = false,\n  renderHeader = (header) => header,\n  renderBody = (body) => body,\n  onTabChange = null,\n  leftColumn = { columnWidth: 3 },\n  rightColumn = { columnWidth: 9 },\n  rowProps: { className: rowClassName, ...rowProps } = {},\n  beforeTabChange = null,\n  children,\n  bodyRef,\n  headerRef,\n}) => {\n  const [openTab, setOpenTab] = React.useState(defaultTab || null);\n  const prevTab = usePrevious(openTab);\n\n  React.useEffect(() => {\n    setOpenTab(defaultTab);\n  }, [defaultTab]);\n\n  React.useEffect(() => {\n    (async () => {\n      if (openTab === prevTab) return;\n      if (\n        typeof beforeTabChange === \"function\" &&\n        !(await beforeTabChange(prevTab, openTab))\n      )\n        setOpenTab(prevTab);\n      if (typeof onTabChange === \"function\") onTabChange(openTab);\n    })();\n  }, [openTab, prevTab]);\n\n  const header = (\n    <ConditionalWrapper\n      condition={vertical}\n      wrapper={<ColumnWrap {...leftColumn} />}\n    >\n      {renderHeader(\n        <TabsHeader\n          tabsClassName={tabsClassName}\n          center={center}\n          right={right}\n          justified={justified}\n          embossed={embossed}\n          bordered={bordered}\n          vertical={vertical}\n          sticky={sticky}\n          inline={inline}\n          openTab={openTab}\n          onTabChange={setOpenTab}\n          ref={headerRef}\n        >\n          {children}\n        </TabsHeader>\n      )}\n    </ConditionalWrapper>\n  );\n\n  const body = (\n    <ConditionalWrapper\n      condition={vertical}\n      wrapper={<ColumnWrap {...rightColumn} />}\n    >\n      {renderBody(\n        <div\n          className={`tab-content${\n            contentClassName ? ` ${contentClassName}` : \"\"\n          }`}\n          ref={bodyRef}\n        >\n          {React.Children.map(children, (child, idx) =>\n            React.isValidElement(child)\n              ? React.cloneElement<any>(child, {\n                  active: isActive(openTab, child.props.id, idx),\n                })\n              : child\n          )}\n        </div>\n      )}\n    </ConditionalWrapper>\n  );\n\n  return (\n    <ConditionalWrapper\n      condition={vertical}\n      wrapper={\n        <div\n          className={`row${ac(rowClassName)}`}\n          style={sticky ? { position: \"relative\" } : {}}\n          {...rowProps}\n        />\n      }\n    >\n      <DisplayIf condition={(vertical && !right) || !vertical}>\n        {header}\n      </DisplayIf>\n      {body}\n      <DisplayIf condition={vertical && right}>{header}</DisplayIf>\n    </ConditionalWrapper>\n  );\n};\n"],"names":["firstDefined","args","el","Tab","active","className","activeClassName","unmountInactive","children","jsx","ac","isActive","openTab","id","idx","TabsHeader","forwardRef","tabsClassName","center","right","justified","embossed","bordered","vertical","inline","sticky","onTabChange","ref","React","child","title","composeColumnSize","columnWidth","k","ColumnWrap","props","Tabs","defaultTab","contentClassName","renderHeader","header","renderBody","body","leftColumn","rightColumn","rowClassName","rowProps","beforeTabChange","bodyRef","headerRef","setOpenTab","prevTab","usePrevious","ConditionalWrapper","jsxs","DisplayIf"],"mappings":"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"}