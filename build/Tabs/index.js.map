{"version":3,"file":"index.js","sources":["../../src/Tabs/Tabs.tsx"],"sourcesContent":["import React, { FC, HTMLProps, ReactNode } from \"react\";\n\nimport { ConditionalWrapper, DisplayIf } from \"src/Conditional\";\nimport { appendClass as ac } from \"src/utils\";\nimport { usePrevious } from \"src/hooks/usePrevious\";\n\ntype TabId = number | string;\n\nconst firstDefined = (...args) =>\n  args.find((el) => typeof el !== \"undefined\" && el !== null);\n\ninterface TabProps {\n  id: TabId;\n  active?: boolean;\n  title: ReactNode;\n  children: ReactNode;\n  className?: string;\n  activeClassName?: string;\n  unmountInactive?: boolean;\n}\n\nexport const Tab: FC<TabProps> = ({\n  active = false,\n  className = null,\n  activeClassName = null,\n  unmountInactive = false,\n  children,\n}) => {\n  if (!active && unmountInactive) return null;\n  return (\n    <div\n      className={`tab-pane${ac(active, \"active\")}${ac(\n        active && activeClassName,\n        activeClassName\n      )}${ac(className)}`}\n    >\n      {children}\n    </div>\n  );\n};\n\nconst isActive = (openTab, id: TabId, idx: number) =>\n  openTab === null ? idx === 0 : openTab === firstDefined(id, idx);\n\ninterface TabsHeaderProps {\n  tabsClassName?: string;\n  center?: boolean;\n  right?: boolean;\n  justified?: boolean;\n  embossed?: boolean;\n  bordered?: boolean;\n  vertical?: boolean;\n  sticky?: boolean;\n  inline?: boolean;\n  openTab?: TabId;\n  onTabChange: (tab: TabId) => void;\n  children: ReactNode;\n}\n\nexport const TabsHeader: FC<TabsHeaderProps> = ({\n  tabsClassName = null,\n  center = false,\n  right = false,\n  justified = false,\n  embossed = false,\n  bordered = false,\n  vertical = false,\n  inline = false,\n  openTab = null,\n  sticky = false,\n  onTabChange,\n  children,\n}) => (\n  <ul\n    className={`tabs${ac(tabsClassName)}${ac(center, \"tabs--centered\")}${ac(\n      right,\n      \"tabs--right\"\n    )}${ac(justified, \"tabs--justified\")}${ac(embossed, \"tabs--embossed\")}${ac(\n      bordered,\n      \"tabs--bordered\"\n    )}${ac(vertical, \"tabs--vertical\")}${ac(inline, \"tabs--inline\")}`}\n    style={sticky ? { position: \"sticky\", top: \"0\" } : {}}\n  >\n    {React.Children.map(children, (child, idx) => {\n      if (!React.isValidElement<TabProps>(child)) return child;\n\n      const {\n        props: { id, title },\n      } = child;\n      return (\n        <li\n          className={`tab${ac(isActive(openTab, id, idx), \"active\")}`}\n          key={firstDefined(id, idx)}\n        >\n          <a onClick={() => onTabChange(firstDefined(id, idx))}>{title}</a>\n        </li>\n      );\n    })}\n  </ul>\n);\n\ninterface ColumnSizes {\n  sm?: number;\n  md?: number;\n  lg?: number;\n  xl?: number;\n}\n\ntype ColumnSize = number | string | ColumnSizes;\n\ntype Column = {\n  columnWidth?: ColumnSize;\n} & React.HTMLProps<HTMLDivElement>;\n\ninterface TabsProps {\n  children: ReactNode;\n  defaultTab?: TabId;\n  tabsClassName?: string;\n  contentClassName?: string;\n  center?: boolean;\n  right?: boolean;\n  justified?: boolean;\n  embossed?: boolean;\n  bordered?: boolean;\n  vertical?: boolean;\n  leftColumn?: Column;\n  rightColumn?: Column;\n  rowProps?: HTMLProps<HTMLDivElement>;\n  sticky?: boolean;\n  inline?: boolean;\n  renderHeader?: (header: JSX.Element) => JSX.Element;\n  renderBody?: (body: JSX.Element) => JSX.Element;\n  onTabChange?: (tab: TabId) => void;\n  beforeTabChange?: (\n    oldTab: TabId,\n    newTab: TabId\n  ) => boolean | Promise<boolean>;\n}\n\nconst composeColumnSize = (columnWidth: ColumnSize): string => {\n  if (typeof columnWidth === \"string\" || typeof columnWidth === \"number\")\n    return `col-${columnWidth}`;\n\n  return Object.keys(columnWidth)\n    .map((k) => `col-${k}-${columnWidth[k]}`)\n    .join(\" \");\n};\n\nconst ColumnWrap: FC<Column> = ({ columnWidth, className, ...props }) => (\n  <div\n    className={`${composeColumnSize(columnWidth)}${ac(className)}`}\n    {...props}\n  />\n);\n\nexport const Tabs: FC<TabsProps> = ({\n  defaultTab = null,\n  tabsClassName = null,\n  contentClassName = null,\n  center = false,\n  right = false,\n  justified = false,\n  embossed = false,\n  bordered = false,\n  vertical = false,\n  sticky = false,\n  inline = false,\n  renderHeader = (header) => header,\n  renderBody = (body) => body,\n  onTabChange = null,\n  leftColumn = { columnWidth: 3 },\n  rightColumn = { columnWidth: 9 },\n  rowProps: { className: rowClassName, ...rowProps } = {},\n  beforeTabChange = null,\n  children,\n}) => {\n  const [openTab, setOpenTab] = React.useState(defaultTab || null);\n  const prevTab = usePrevious(openTab);\n\n  React.useEffect(() => {\n    setOpenTab(defaultTab);\n  }, [defaultTab]);\n\n  React.useEffect(() => {\n    (async () => {\n      if (openTab === prevTab) return;\n      if (\n        typeof beforeTabChange === \"function\" &&\n        !(await beforeTabChange(prevTab, openTab))\n      )\n        setOpenTab(prevTab);\n      if (typeof onTabChange === \"function\") onTabChange(openTab);\n    })();\n  }, [openTab, prevTab]);\n\n  const header = (\n    <ConditionalWrapper\n      condition={vertical}\n      wrapper={<ColumnWrap {...leftColumn} />}\n    >\n      {renderHeader(\n        <TabsHeader\n          tabsClassName={tabsClassName}\n          center={center}\n          right={right}\n          justified={justified}\n          embossed={embossed}\n          bordered={bordered}\n          vertical={vertical}\n          sticky={sticky}\n          inline={inline}\n          openTab={openTab}\n          onTabChange={setOpenTab}\n        >\n          {children}\n        </TabsHeader>\n      )}\n    </ConditionalWrapper>\n  );\n\n  const body = (\n    <ConditionalWrapper\n      condition={vertical}\n      wrapper={<ColumnWrap {...rightColumn} />}\n    >\n      {renderBody(\n        <div\n          className={`tab-content${\n            contentClassName ? ` ${contentClassName}` : \"\"\n          }`}\n        >\n          {React.Children.map(children, (child, idx) =>\n            React.isValidElement(child)\n              ? React.cloneElement(child, {\n                  active: isActive(openTab, child.props.id, idx),\n                })\n              : child\n          )}\n        </div>\n      )}\n    </ConditionalWrapper>\n  );\n\n  return (\n    <ConditionalWrapper\n      condition={vertical}\n      wrapper={\n        <div\n          className={`row${ac(rowClassName)}`}\n          style={sticky ? { position: \"relative\" } : {}}\n          {...rowProps}\n        />\n      }\n    >\n      <DisplayIf condition={(vertical && !right) || !vertical}>\n        {header}\n      </DisplayIf>\n      {body}\n      <DisplayIf condition={vertical && right}>{header}</DisplayIf>\n    </ConditionalWrapper>\n  );\n};\n"],"names":["firstDefined","args","find","el","Tab","active","className","activeClassName","unmountInactive","children","div","ac","isActive","openTab","id","idx","TabsHeader","tabsClassName","center","right","justified","embossed","bordered","vertical","inline","sticky","onTabChange","ul","style","position","top","React","Children","map","child","isValidElement","props","title","li","key","a","onClick","composeColumnSize","columnWidth","Object","keys","k","join","ColumnWrap","Tabs","defaultTab","contentClassName","renderHeader","header","renderBody","body","leftColumn","rightColumn","rowProps","rowClassName","beforeTabChange","setOpenTab","useState","prevTab","usePrevious","useEffect","ConditionalWrapper","condition","wrapper","cloneElement","DisplayIf"],"mappings":"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"}