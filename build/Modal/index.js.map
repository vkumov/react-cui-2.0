{"version":3,"file":"index.js","sources":["../../src/Modal/Header.tsx","../../src/Modal/Footer.tsx","../../src/Modal/Body.tsx","../../src/Modal/ModalPortal.tsx","../../src/Modal/Modal.tsx","../../src/Modal/ConfirmationModal.tsx","../../src/Modal/PromptModal.tsx","../../src/Modal/DynamicModal.tsx","../../src/Modal/calls.tsx"],"sourcesContent":["import React, { FC, HTMLProps, PropsWithChildren } from \"react\";\n\nimport { appendClass as ac } from \"src/utils\";\n\n/**\n * Modal Header\n */\n\ntype ModalHeaderProps = PropsWithChildren<{\n  className?: string;\n}> &\n  HTMLProps<HTMLDivElement>;\n\nexport const ModalHeader: FC<ModalHeaderProps> = ({\n  className = null,\n  children,\n  ...props\n}) => (\n  <div className={`modal__header${ac(className)}`} {...props}>\n    {children}\n  </div>\n);\n","import React, { FC, HTMLProps, PropsWithChildren, forwardRef } from \"react\";\n\nimport { appendClass as ac } from \"src/utils\";\n\n/**\n * Modal Footer\n */\n\ntype ModalFooterProps = PropsWithChildren<{\n  className?: string;\n}> &\n  HTMLProps<HTMLDivElement>;\n\nexport const ModalFooter: FC<ModalFooterProps> = forwardRef(\n  ({ className = null, children, ...props }, ref) => (\n    <div className={`modal__footer${ac(className)}`} {...props} ref={ref}>\n      {children}\n    </div>\n  )\n);\n","import React, { FC, HTMLProps, PropsWithChildren, forwardRef } from \"react\";\n\nimport { appendClass as ac } from \"src/utils\";\n\n/**\n * Modal Body\n */\n\ntype ModalBodyProps = PropsWithChildren<{\n  className?: string;\n}> &\n  HTMLProps<HTMLDivElement>;\n\nexport const ModalBody: FC<ModalBodyProps> = forwardRef(\n  ({ className = null, children, ...props }, ref) => (\n    <div className={`modal__body${ac(className)}`} {...props} ref={ref}>\n      {children}\n    </div>\n  )\n);\n","import React, { ComponentProps, FC, ReactNode } from \"react\";\nimport { FloatingPortal } from \"@floating-ui/react\";\n\nimport { useFloatingContext } from \"src/FloatingProvider\";\n\nexport type ModalPortalProps = {\n  children?: ReactNode;\n} & ComponentProps<typeof FloatingPortal>;\n\nexport const ModalPortal: FC<ModalPortalProps> = ({\n  root: rootProvided,\n  id,\n  children,\n  ...props\n}) => {\n  const modalContext = useFloatingContext();\n  const root: HTMLElement | null | undefined =\n    rootProvided ?? modalContext ? modalContext.rootRef.current : undefined;\n\n  id ??= root ? undefined : \"--cui-modal-portal\";\n\n  return (\n    <FloatingPortal root={root} id={id} {...props}>\n      {children}\n    </FloatingPortal>\n  );\n};\n","import React, { ComponentProps, type FC, type ReactNode } from \"react\";\nimport {\n  FloatingFocusManager,\n  FloatingNode,\n  FloatingOverlay,\n  FloatingPortal,\n  FloatingTree,\n  useClick,\n  useDismiss,\n  useFloating,\n  useFloatingNodeId,\n  useFloatingParentNodeId,\n  useInteractions,\n  useRole,\n  type ReferenceType,\n} from \"@floating-ui/react\";\nimport { Transition } from \"react-transition-group\";\n\nimport { ConditionalWrapper, DisplayIf as If } from \"src/Conditional\";\nimport { appendClass as ac } from \"src/utils\";\n\nimport { ModalBody } from \"./Body\";\nimport { ModalFooter } from \"./Footer\";\nimport { ModalHeader } from \"./Header\";\nimport { ModalPortal } from \"./ModalPortal\";\n\n/**\n * Modal\n */\n\nexport type ModalSize = \"small\" | \"default\" | \"large\" | \"full\" | \"fluid\";\n\nexport interface ModalProps {\n  size?: ModalSize;\n  closeIcon?: boolean;\n  closeHandle?: () => void;\n  children?: ReactNode;\n  title?: ReactNode;\n  isOpen: boolean;\n  autoClose?: boolean;\n  left?: boolean;\n  animationDuration?:\n    | number\n    | { appear?: number; enter?: number; exit?: number };\n  transitionEvents?: Record<string, unknown>;\n  dialogProps?: React.ComponentProps<\"div\">;\n  contentProps?: React.ComponentProps<\"div\">;\n  maximize?: boolean;\n  refElement?: ReferenceType;\n  root?: ComponentProps<typeof FloatingPortal>[\"root\"];\n  portalId?: ComponentProps<typeof FloatingPortal>[\"id\"];\n  lockScroll?: ComponentProps<typeof FloatingOverlay>[\"lockScroll\"];\n  ancestorScroll?: Parameters<typeof useDismiss>[1][\"ancestorScroll\"];\n}\n\ntype ModalSizes = {\n  Small: FC<ModalProps>;\n  Large: FC<ModalProps>;\n  Full: FC<ModalProps>;\n  Fluid: FC<ModalProps>;\n};\n\ntype ModalComponents = {\n  Header: typeof ModalHeader;\n  Body: typeof ModalBody;\n  Footer: typeof ModalFooter;\n};\n\nexport const Modal: ModalSizes & ModalComponents & FC<ModalProps> = ({\n  size = null,\n  autoClose = true,\n  animationDuration = 250,\n  closeIcon = false,\n  title = null,\n  closeHandle = null,\n  left = false,\n  transitionEvents = null,\n  dialogProps = null,\n  contentProps = null,\n  maximize = false,\n  children,\n  isOpen,\n  refElement,\n  root,\n  lockScroll,\n  ancestorScroll,\n  portalId,\n}) => {\n  const [maximized, setMaximized] = React.useState(false);\n\n  React.useEffect(() => setMaximized(false), [isOpen]);\n  const realSize = React.useMemo(\n    () => (maximized ? \"full\" : size),\n    [maximized, size]\n  );\n\n  const nodeId = useFloatingNodeId();\n  const parentId = useFloatingParentNodeId();\n  const { reference, floating, context } = useFloating({\n    open: isOpen,\n    onOpenChange: (state) => (!state ? void closeHandle() : void 0),\n    nodeId,\n  });\n\n  React.useEffect(() => {\n    if (refElement) reference(refElement);\n  }, [refElement]);\n\n  const click = useClick(context);\n  const role = useRole(context, { role: \"dialog\" });\n  const dismiss = useDismiss(context, {\n    enabled: autoClose,\n    ancestorScroll,\n    bubbles: false,\n    outsidePress() {\n      if (!parentId) return false;\n      return true;\n    },\n  });\n\n  const { getFloatingProps } = useInteractions([click, role, dismiss]);\n\n  const nodeRef = React.useRef(null);\n\n  const t = (\n    <ModalPortal id={portalId} root={root}>\n      <Transition\n        in={isOpen}\n        mountOnEnter\n        unmountOnExit\n        timeout={animationDuration}\n        nodeRef={nodeRef}\n        {...transitionEvents}\n      >\n        {(state) => (\n          <FloatingNode id={nodeId}>\n            <FloatingOverlay\n              className={`modal-backdrop${ac(\n                state === \"exiting\",\n                \"modal-backdrop--before-close\"\n              )}`}\n              lockScroll={lockScroll}\n              ref={nodeRef}\n            >\n              <FloatingFocusManager context={context} modal>\n                <div\n                  ref={floating}\n                  {...getFloatingProps({\n                    className: `modal${ac(realSize, `modal--${realSize}`)}${ac(\n                      left,\n                      \"modal--left\"\n                    )}`,\n                    onClick: () => (autoClose ? closeHandle() : void 0),\n                  })}\n                >\n                  <div\n                    className=\"modal__dialog\"\n                    {...dialogProps}\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    <div className=\"modal__content\" {...contentProps}>\n                      <If condition={!!(closeIcon && closeHandle) || maximize}>\n                        <ConditionalWrapper\n                          condition={!!(closeIcon && closeHandle) && maximize}\n                          wrapper={<div className=\"modal__close\" />}\n                        >\n                          {Boolean(maximize) && (\n                            <a\n                              className={`${ac(\n                                !(closeIcon && closeHandle),\n                                \"modal__close\"\n                              )}${ac(\n                                closeIcon && closeHandle,\n                                \"qtr-margin-right\"\n                              )}`}\n                              onClick={() => setMaximized((curr) => !curr)}\n                            >\n                              <span\n                                className={\n                                  maximized ? \"icon-minimize\" : \"icon-maximize\"\n                                }\n                              />\n                            </a>\n                          )}\n                          {Boolean(closeIcon && closeHandle) && (\n                            <a\n                              className={!maximize ? \"modal__close\" : \"\"}\n                              onClick={closeHandle}\n                            >\n                              <span className=\"icon-close\" />\n                            </a>\n                          )}\n                        </ConditionalWrapper>\n                      </If>\n                      {Boolean(title) && (\n                        <ModalHeader>\n                          <h1 className=\"modal__title\">{title}</h1>\n                        </ModalHeader>\n                      )}\n                      {children}\n                    </div>\n                  </div>\n                </div>\n              </FloatingFocusManager>\n            </FloatingOverlay>\n          </FloatingNode>\n        )}\n      </Transition>\n    </ModalPortal>\n  );\n\n  if (parentId === null) {\n    return <FloatingTree>{t}</FloatingTree>;\n  }\n\n  return t;\n};\n\nModal.Small = (props) => <Modal {...props} size=\"small\" />;\nModal.Large = (props) => <Modal {...props} size=\"large\" />;\nModal.Full = (props) => <Modal {...props} size=\"full\" />;\nModal.Fluid = (props) => <Modal {...props} size=\"fluid\" />;\n\nModal.Header = ModalHeader;\nModal.Body = ModalBody;\nModal.Footer = ModalFooter;\n","import React, { ChangeEvent, FC, ReactNode } from \"react\";\n\nimport { Button, ButtonColor } from \"src/Button\";\n\nimport { ModalBody } from \"./Body\";\nimport { ModalFooter } from \"./Footer\";\nimport { Modal } from \"./Modal\";\nimport type { DontAskAgain } from \"./calls\";\n\n/**\n * Confirmation Modal\n */\n\ntype ConfirmationModalProps = {\n  isOpen?: boolean;\n  confirmHandle: (dontAskAgain?: boolean) => boolean | Promise<boolean>;\n  closeHandle: () => void;\n  prompt: ReactNode;\n  confirmType?: ButtonColor;\n  confirmText?: string;\n  autoClose?: boolean;\n  dontAskAgain?: DontAskAgain;\n};\n\nexport const ConfirmationModal: FC<ConfirmationModalProps> = ({\n  isOpen = false,\n  confirmType = \"primary\",\n  autoClose = true,\n  confirmText = \"Confirm\",\n  confirmHandle,\n  closeHandle,\n  prompt,\n  dontAskAgain = { show: false },\n}) => {\n  const [doing, setDoing] = React.useState(false);\n  const [dontAsk, setDontAsk] = React.useState(false);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      closeIcon\n      closeHandle={closeHandle}\n      autoClose={autoClose}\n      title=\"Confirmation\"\n    >\n      <ModalBody>\n        {prompt}\n        {dontAskAgain?.show ? (\n          <div className=\"form-group\">\n            <label className=\"checkbox\">\n              <input\n                type=\"checkbox\"\n                checked={dontAsk}\n                onChange={(e: ChangeEvent<HTMLInputElement>) => {\n                  setDontAsk(e.target.checked);\n                }}\n              />\n              <span className=\"checkbox__input\"></span>\n              <span className=\"checkbox__label\">\n                {dontAskAgain.text || \"Don't ask again\"}\n              </span>\n            </label>\n          </div>\n        ) : null}\n      </ModalBody>\n      <ModalFooter>\n        <Button.Light onClick={closeHandle}>Close</Button.Light>\n        <Button\n          color={confirmType}\n          disabled={doing}\n          onClick={async () => {\n            setDoing(true);\n            if (await confirmHandle(dontAsk)) setDoing(false);\n          }}\n        >\n          {confirmText}\n          {doing ? (\n            <span className=\"icon-animation spin qtr-margin-left\" />\n          ) : null}\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n","import React, {\n  ChangeEvent,\n  KeyboardEvent,\n  PropsWithChildren,\n  ReactNode,\n} from \"react\";\n\nimport { Button } from \"src/Button\";\nimport { DisplayIf as If } from \"src/Conditional\";\nimport { Input } from \"src/Input\";\n\nimport { ModalBody } from \"./Body\";\nimport { ModalFooter } from \"./Footer\";\nimport { Modal } from \"./Modal\";\n\n/**\n * Prompt Modal\n */\n\nexport interface PromptModalProps<T extends React.ReactText> {\n  title: ReactNode;\n  question: ReactNode;\n  onSave: (value: T) => void | Promise<void>;\n  onClose?: () => void;\n  initial?: T;\n  type?: string;\n  isOpen: boolean;\n  hint?: ReactNode;\n  validate?: ((value: T) => Promise<boolean>) | ((value: T) => boolean);\n}\n\nexport function PromptModal<T extends React.ReactText>({\n  title,\n  question,\n  onSave: cb,\n  onClose,\n  initial,\n  type,\n  isOpen,\n  hint,\n  validate,\n}: PropsWithChildren<PromptModalProps<T>>): JSX.Element {\n  const [val, setVal] = React.useState<T>(initial);\n  const [doing, setDoing] = React.useState(false);\n  const onSave = React.useCallback(async () => {\n    if (typeof validate === \"function\" && !(await validate(val))) return;\n\n    setDoing(true);\n    await cb(val);\n    setDoing(false);\n    onClose();\n  }, [onClose, cb, val, validate]);\n\n  React.useEffect(() => setVal(initial), [initial]);\n\n  const inpRef = React.useRef<HTMLInputElement>(undefined);\n\n  React.useEffect(() => {\n    if (isOpen && inpRef.current) inpRef.current.focus();\n  }, [isOpen]);\n\n  return (\n    <Modal isOpen={isOpen} closeIcon closeHandle={onClose} title={title}>\n      <ModalBody>\n        <Input\n          type={type}\n          onChange={(e: ChangeEvent<HTMLInputElement>) =>\n            setVal(e.target.value as T)\n          }\n          onKeyUp={(e: KeyboardEvent<HTMLInputElement>) => {\n            if (e.key === \"Enter\") {\n              onSave();\n            }\n          }}\n          name=\"promptInput\"\n          value={val}\n          label={\n            <>\n              {question}\n              <If condition={!!hint && typeof hint === \"string\"}>\n                <span\n                  data-balloon={hint}\n                  data-balloon-length=\"large\"\n                  data-balloon-pos=\"up\"\n                >\n                  <span\n                    className=\"icon-question-circle qtr-margin-left\"\n                    style={{ cursor: \"help\" }}\n                  />\n                </span>\n              </If>\n            </>\n          }\n          ref={inpRef}\n        />\n      </ModalBody>\n      <ModalFooter>\n        <Button color=\"light\" onClick={onClose} disabled={doing}>\n          Close\n        </Button>\n        <Button color=\"primary\" onClick={onSave} disabled={doing}>\n          OK\n          {doing ? (\n            <span className=\"icon-animation spin qtr-margin-left\" />\n          ) : null}\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n}\n","import React, { FC, cloneElement } from \"react\";\nimport { nanoid } from \"nanoid\";\n\nimport { Button } from \"src/Button\";\nimport { eventManager } from \"src/utils/eventManager\";\n\nimport { ModalBody } from \"./Body\";\nimport { ConfirmationModal } from \"./ConfirmationModal\";\nimport { ModalFooter } from \"./Footer\";\nimport { Modal } from \"./Modal\";\nimport { ModalPortal, ModalPortalProps } from \"./ModalPortal\";\nimport { PromptModal } from \"./PromptModal\";\n\nexport type DynamicModalProps = Pick<\n  ModalPortalProps,\n  \"root\" | \"id\" | \"preserveTabOrder\"\n>;\n\nexport const DynamicModal: FC<DynamicModalProps> = (props) => {\n  const [modals, setModals] = React.useState([]);\n\n  const addModal = React.useCallback(\n    (modal) =>\n      setModals((curr) => [...curr, { id: nanoid(), shown: true, ...modal }]),\n    []\n  );\n\n  const hideModal = React.useCallback((id) => {\n    setModals((curr) =>\n      curr.map((m) => (m.id === id ? { ...m, shown: false } : m))\n    );\n  }, []);\n\n  const deleteModal = React.useCallback((id) => {\n    setModals((curr) =>\n      curr.filter((m) => {\n        if (m.id === id && typeof m.onClosed === \"function\") m.onClosed();\n        return m.id !== id;\n      })\n    );\n  }, []);\n\n  const closeModal = React.useCallback(\n    (id, cb?: () => unknown) => {\n      hideModal(id);\n      setTimeout(() => deleteModal(id), 500);\n      if (cb) cb();\n    },\n    [hideModal, deleteModal]\n  );\n\n  React.useEffect(() => {\n    const cb = (m) => addModal(m);\n    eventManager.on(\"showModal\", cb);\n    return () => {\n      eventManager.off(\"showModal\", cb);\n    };\n  }, [addModal]);\n\n  if (!modals.length) return null;\n\n  return (\n    <ModalPortal {...props}>\n      {modals.map((modal) => {\n        if (modal.modalType === \"dynamic\")\n          return (\n            <Modal\n              {...modal.modalProps}\n              key={modal.id}\n              isOpen={modal.shown}\n              closeHandle={() => closeModal(modal.id, modal.onModalClose)}\n              title={modal.title}\n            >\n              {modal.fullBody ? (\n                typeof modal.fullBody === \"function\" ? (\n                  modal.fullBody({\n                    close: () => closeModal(modal.id, modal.onModalClose),\n                  })\n                ) : (\n                  cloneElement(modal.fullBody, {\n                    close: () => closeModal(modal.id, modal.onModalClose),\n                  })\n                )\n              ) : (\n                <>\n                  <ModalBody>{modal.body}</ModalBody>\n                  <ModalFooter>\n                    {modal.buttons.map((button, idx) => (\n                      <Button\n                        key={idx}\n                        color={button.color || \"light\"}\n                        onClick={(e) => {\n                          if (typeof button.onClick === \"function\")\n                            button.onClick(e, () =>\n                              closeModal(modal.id, modal.onModalClose)\n                            );\n                          else closeModal(modal.id, modal.onModalClose);\n                        }}\n                      >\n                        {button.text}\n                      </Button>\n                    ))}\n                  </ModalFooter>\n                </>\n              )}\n            </Modal>\n          );\n\n        if (modal.modalType === \"notification\")\n          return (\n            <Modal\n              key={modal.id}\n              isOpen={modal.shown}\n              closeIcon\n              closeHandle={() => closeModal(modal.id, modal.onModalClose)}\n              title={modal.title}\n            >\n              <ModalBody>{modal.body}</ModalBody>\n              <ModalFooter>\n                <Button\n                  color={modal.buttonColor || \"light\"}\n                  onClick={() => closeModal(modal.id, modal.onModalClose)}\n                >\n                  {modal.button}\n                </Button>\n              </ModalFooter>\n            </Modal>\n          );\n\n        if (modal.modalType === \"prompt\") {\n          if (typeof modal.options !== \"undefined\") {\n            const {\n              initial = \"\",\n              type = \"text\",\n              hint = undefined,\n              validate = undefined,\n            } = modal.options;\n            return (\n              <PromptModal\n                key={modal.id}\n                isOpen={modal.shown}\n                onClose={() => closeModal(modal.id, modal.onModalClose)}\n                onSave={modal.cb}\n                title={modal.title}\n                question={modal.question}\n                initial={initial}\n                type={type}\n                hint={hint}\n                validate={validate}\n              />\n            );\n          }\n\n          return (\n            <PromptModal\n              key={modal.id}\n              isOpen={modal.shown}\n              onClose={() => closeModal(modal.id, modal.onModalClose)}\n              onSave={modal.cb}\n              title={modal.title}\n              question={modal.question}\n              initial={modal.initial}\n              type={modal.type}\n              hint={modal.hint}\n            />\n          );\n        }\n\n        if (modal.modalType === \"confirmation\")\n          return (\n            <ConfirmationModal\n              key={modal.id}\n              isOpen={modal.shown}\n              prompt={modal.prompt}\n              confirmHandle={async (dontAskAgain) => {\n                const r = await modal.onConfirm(dontAskAgain);\n                if (r) closeModal(modal.id, modal.onModalClose);\n                return true;\n              }}\n              closeHandle={() => closeModal(modal.id, modal.onModalClose)}\n              confirmText={modal.confirmText}\n              confirmType={modal.confirmType}\n              dontAskAgain={modal.dontAskAgain}\n            />\n          );\n\n        return null;\n      })}\n    </ModalPortal>\n  );\n};\n\nexport { DynamicModal as ConfirmationListener };\n","import React, { type ReactNode } from \"react\";\n\nimport type { ButtonColor } from \"src/Button\";\nimport { eventManager } from \"src/utils/eventManager\";\n\nimport type { ModalProps } from \"./Modal\";\nimport type { PromptModalProps } from \"./PromptModal\";\n\nexport type DontAskAgain = {\n  show: boolean;\n  text?: ReactNode;\n};\n\ntype TextOrNumber = string | number;\n\nexport function confirmation(\n  prompt: ReactNode,\n  onConfirm: (dontAskAgain?: boolean) => boolean | Promise<boolean>,\n  confirmType: ButtonColor = \"primary\",\n  confirmText = \"Confirm\",\n  dontAskAgain: DontAskAgain = { show: false }\n): Promise<void> {\n  if (!prompt) throw new Error(\"Prompt must be specified\");\n  if (!onConfirm || typeof onConfirm !== \"function\")\n    throw new Error(\"onConfirm must be specified and must be a function\");\n\n  return new Promise((resolve) =>\n    eventManager.emit(\"showModal\", {\n      modalType: \"confirmation\",\n      prompt: <p>{prompt}</p>,\n      onConfirm,\n      confirmText,\n      confirmType,\n      dontAskAgain,\n      onModalClose: resolve,\n    })\n  );\n}\n\ntype NotificationModal = (\n  title: ReactNode,\n  body: ReactNode,\n  buttonColor?: ButtonColor,\n  button?: ReactNode\n) => Promise<void>;\n\nexport const notificationModal: NotificationModal = (\n  title,\n  body,\n  buttonColor = \"light\",\n  button = \"OK\"\n): Promise<void> => {\n  if (!title || !body) throw new Error(\"Title and body must be specified\");\n\n  return new Promise((resolve) => {\n    eventManager.emit(\"showModal\", {\n      modalType: \"notification\",\n      title,\n      body,\n      buttonColor,\n      button,\n      onClosed: resolve,\n    });\n  });\n};\n\nexport { notificationModal as notification };\n\ntype initialOrOptions<T extends TextOrNumber> =\n  | Pick<PromptModalProps<T>, \"initial\" | \"type\" | \"hint\" | \"validate\">\n  | string;\n\nexport function prompt<T extends TextOrNumber>(\n  title: string,\n  question: ReactNode,\n  cb: (value: T) => void | Promise<void>,\n  initial?: string,\n  type?: string,\n  hint?: ReactNode\n): Promise<void>;\nexport function prompt<T extends TextOrNumber>(\n  title: string,\n  question: ReactNode,\n  cb: (value: T) => void | Promise<void>,\n  options?: Pick<PromptModalProps<T>, \"initial\" | \"type\" | \"hint\" | \"validate\">\n): Promise<void>;\nexport function prompt<T extends TextOrNumber>(\n  title: string,\n  question: ReactNode,\n  cb: (value: T) => void | Promise<void>,\n  initial: initialOrOptions<T>,\n  type = \"text\",\n  hint = undefined\n): Promise<void> {\n  if (!title || !question)\n    throw new Error(\"Title and question must be specified\");\n\n  if (typeof initial === \"object\") {\n    return new Promise((resolve) =>\n      eventManager.emit(\"showModal\", {\n        modalType: \"prompt\",\n        title,\n        question,\n        cb,\n        options: initial,\n        onModalClose: resolve,\n      })\n    );\n  }\n\n  return new Promise((resolve) =>\n    eventManager.emit(\"showModal\", {\n      modalType: \"prompt\",\n      title,\n      initial,\n      type,\n      question,\n      cb,\n      hint,\n      onModalClose: resolve,\n    })\n  );\n}\n\ntype CloseHandler = () => void;\n\ninterface ModalButton {\n  color?: ButtonColor;\n  text: ReactNode;\n  onClick?: (\n    e: React.MouseEvent<HTMLButtonElement>,\n    close: CloseHandler\n  ) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type PropsWithCloseModal<P = {}> = P & { close: () => void };\n\ntype FullBodyRender = (props: { close: () => void }) => ReactNode;\n\ninterface DynamicModalOptions {\n  title: ReactNode;\n  fullBody?: ReactNode | FullBodyRender;\n  body?: ReactNode;\n  buttons?: ModalButton[];\n  modalProps?: Partial<ModalProps>;\n}\n\ntype DynamicModalHandler = (options: DynamicModalOptions) => Promise<void>;\n\nexport const dynamicModal: DynamicModalHandler = ({\n  title,\n  fullBody = null,\n  body = null,\n  buttons = [],\n  modalProps = {},\n}): Promise<void> => {\n  return new Promise((resolve) => {\n    eventManager.emit(\"showModal\", {\n      modalType: \"dynamic\",\n      title,\n      fullBody,\n      body,\n      buttons,\n      modalProps,\n      onModalClose: resolve,\n    });\n  });\n};\n"],"names":["_extends","ModalHeader","React","className","children","props","div","ac","ModalFooter","forwardRef","ref","ModalBody","ModalPortal","root","rootProvided","id","modalContext","useFloatingContext","rootRef","current","undefined","FloatingPortal","Modal","size","autoClose","animationDuration","closeIcon","title","closeHandle","left","transitionEvents","dialogProps","contentProps","maximize","isOpen","refElement","lockScroll","ancestorScroll","portalId","useState","maximized","setMaximized","useEffect","realSize","useMemo","nodeId","useFloatingNodeId","parentId","useFloatingParentNodeId","useFloating","open","onOpenChange","state","reference","floating","context","click","useClick","role","useRole","dismiss","useDismiss","enabled","bubbles","outsidePress","getFloatingProps","useInteractions","nodeRef","useRef","t","Transition","in","mountOnEnter","unmountOnExit","timeout","FloatingNode","FloatingOverlay","FloatingFocusManager","modal","onClick","e","stopPropagation","If","condition","ConditionalWrapper","wrapper","Boolean","a","curr","span","h1","FloatingTree","Small","Large","Full","Fluid","Header","Body","Footer","ConfirmationModal","confirmType","confirmText","confirmHandle","prompt","dontAskAgain","show","doing","setDoing","dontAsk","setDontAsk","label","input","type","checked","onChange","target","text","Button","Light","color","disabled","PromptModal","question","onSave","cb","onClose","initial","hint","validate","val","setVal","useCallback","inpRef","focus","createElement","Input","value","onKeyUp","key","name","Fragment","data-balloon","data-balloon-length","data-balloon-pos","style","cursor","DynamicModal","modals","setModals","addModal","nanoid","shown","hideModal","map","m","deleteModal","filter","onClosed","closeModal","setTimeout","eventManager","on","off","length","modalType","modalProps","onModalClose","fullBody","close","cloneElement","body","buttons","button","idx","buttonColor","options","r","onConfirm","confirmation","Error","Promise","resolve","emit","p","notificationModal","dynamicModal"],"mappings":"gmMAAA,SAAAA,YAAA,qQAaaC,IAAAA,YAAoC,gBAK/CC,uBAJAC,UAAAA,8BAAY,IAAI,YAChBC,gBAAAA,SACGC,uCAFHF,YACAC,oBAGAF,MAACI,aAAAA,CAAAA,MAAAA,WAAAA,CAAIH,UAAW,AAAC,gBAA6B,OAAdI,YAAGJ,WAAkBE,EAAAA,OAClDD,SAEH,ECrBF,SAAAJ,YAAA,qQAaaQ,IAAAA,YAAoCC,WAC/C,gBAA2CC,IACzCR,uBADCC,UAAAA,8BAAY,IAAI,YAAEC,gBAAAA,SAAaC,uCAA/BF,YAAkBC,oBACnBF,MAACI,aAAAA,CAAAA,MAAAA,WAAAA,CAAIH,UAAW,AAAC,gBAA6B,OAAdI,YAAGJ,WAAkBE,EAAAA,MAAAA,CAAOK,IAAKA,MAC9DN,SAGL,GCnBF,SAAAJ,YAAA,qQAaaW,IAAAA,UAAgCF,WAC3C,gBAA2CC,IACzCR,uBADCC,UAAAA,8BAAY,IAAI,YAAEC,gBAAAA,SAAaC,uCAA/BF,YAAkBC,oBACnBF,MAACI,aAAAA,CAAAA,MAAAA,WAAAA,CAAIH,UAAW,AAAC,cAA2B,OAAdI,YAAGJ,WAAkBE,EAAAA,MAAAA,CAAOK,IAAKA,MAC5DN,SAGL,GCnBF,SAAAJ,YAAA,qQASO,IAAMY,YAAoC,gBAK3C,KAJJC,AAAMC,oBAAND,KACAE,UAAAA,GACAX,gBAAAA,SACGC,uCAHHQ,OACAE,KACAX,aAGA,IAAMY,aAAeC,qBACrB,IAAMJ,KACJC,AAAAA,CAAAA,eAAAA,IAAAA,EAAAA,eAAAA,KAAAA,EAAAA,aAAgBE,YAAY,AAAA,EAAGA,aAAaE,OAAO,CAACC,OAAO,CAAGC,SAAS,AAEzEL,CAAAA,KAAAA,IAAAA,EAAAA,KAAAA,KAAAA,EAAAA,GAAAA,GAAOF,KAAOO,UAAY,oBAAoB,CAE9C,OACElB,MAACmB,aAAAA,CAAAA,eAAAA,WAAAA,CAAeR,KAAMA,KAAME,GAAIA,IAAQV,OACrCD,SAGP,EC1BA,SAAAJ,YAAA,qQAoEasB,IAAAA,MAAuD,eAmB9D,iBAlBJC,KAAAA,oBAAO,IAAI,wBACXC,UAAAA,8BAAY,IAAI,qCAChBC,kBAAAA,8CAAoB,wCACpBC,UAAAA,8BAAY,KAAK,yBACjBC,MAAAA,sBAAQ,IAAI,2BACZC,YAAAA,kCAAc,IAAI,0BAClBC,KAAAA,oBAAO,KAAK,+BACZC,iBAAAA,4CAAmB,IAAI,sCACvBC,YAAAA,kCAAc,IAAI,kCAClBC,aAAAA,oCAAe,IAAI,+BACnBC,SAAAA,4BAAW,KAAK,WAChB7B,eAAAA,SACA8B,aAAAA,OACAC,iBAAAA,WACAtB,WAAAA,KACAuB,iBAAAA,WACAC,qBAAAA,eACAC,eAAAA,SAEA,IAAkCpC,mBAAAA,MAAMqC,QAAQ,CAAC,KAAK,KAA/CC,UAA2BtC,OAAhBuC,aAAgBvC,OAElCA,MAAMwC,SAAS,CAAC,kBAAMD,aAAa,KAAK,GAAG,CAACP,OAAO,EACnD,IAAMS,SAAWzC,MAAM0C,OAAO,CAC5B,kBAAOJ,UAAY,OAASjB,IAAI,EAChC,CAACiB,UAAWjB,KAAK,EAGnB,IAAMsB,OAASC,oBACf,IAAMC,SAAWC,0BACjB,IAAyCC,KAAAA,YAAY,CACnDC,KAAMhB,OACNiB,aAAc,SAACC,aAAW,CAACA,MAAQ,KAAKxB,cAAgB,KAAK,CAAC,EAC9DiB,OAAAA,MACF,GAJQQ,UAAiCJ,KAAjCI,UAAWC,SAAsBL,KAAtBK,SAAUC,QAAYN,KAAZM,QAM7BrD,MAAMwC,SAAS,CAAC,UAAM,CACpB,GAAIP,WAAYkB,UAAUlB,WAAAA,EACzB,CAACA,WAAW,EAEf,IAAMqB,MAAQC,SAASF,SACvB,IAAMG,KAAOC,QAAQJ,QAAS,CAAEG,KAAM,QAAS,GAC/C,IAAME,QAAUC,WAAWN,QAAS,CAClCO,QAAStC,UACTa,eAAAA,eACA0B,QAAS,KAAK,CACdC,aAAAA,SAAAA,cAAe,CACb,GAAI,CAACjB,SAAU,OAAO,KAAK,AAAA,CAC3B,OAAO,IAAI,AACb,CACF,GAEA,IAAM,AAAEkB,iBAAqBC,gBAAgB,CAACV,MAAOE,KAAME,QAAQ,EAA3DK,iBAER,IAAME,QAAUjE,MAAMkE,MAAM,CAAC,IAAI,EAEjC,IAAMC,EACJnE,MAACU,aAAAA,CAAAA,YAAAA,CAAYG,GAAIuB,SAAUzB,KAAMA,MAC/BX,MAACoE,aAAAA,CAAAA,WAAAA,WAAAA,CACCC,GAAIrC,OACJsC,aAAAA,IAAY,CACZC,cAAAA,IAAa,CACbC,QAASjD,kBACT0C,QAASA,SACLrC,kBAEH,SAACsB,cACAlD,MAACyE,aAAAA,CAAAA,aAAAA,CAAa5D,GAAI8B,QAChB3C,MAAC0E,aAAAA,CAAAA,gBAAAA,CACCzE,UAAW,AAAC,iBAGV,OAH0BI,YAC1B6C,QAAU,UACV,iCAEFhB,WAAYA,WACZ1B,IAAKyD,SAELjE,MAAC2E,aAAAA,CAAAA,qBAAAA,CAAqBtB,QAASA,QAASuB,MAAAA,IAAK,EAC3C5E,MAACI,aAAAA,CAAAA,MAAAA,WAAAA,CACCI,IAAK4C,UACDW,iBAAiB,CACnB9D,UAAW,AAAC,QAA4CI,OAArCA,YAAGoC,SAAU,AAAC,UAAkB,OAATA,YAGxC,OAHsDpC,YACtDsB,KACA,gBAEFkD,QAAS,kBAAOvD,UAAYI,cAAgB,KAAK,CAAC,CACpD,IAEA1B,MAACI,aAAAA,CAAAA,MAAAA,WAAAA,CACCH,UAAU,eACN4B,EAAAA,YAAAA,CACJgD,QAAS,SAACC,UAAMA,EAAEC,eAAe,MAEjC/E,MAACI,aAAAA,CAAAA,MAAAA,WAAAA,CAAIH,UAAU,gBAAqB6B,EAAAA,cAClC9B,MAACgF,aAAAA,CAAAA,UAAAA,CAAGC,UAAW,CAAC,CAAEzD,CAAAA,WAAaE,WAAAA,GAAgBK,UAC7C/B,MAACkF,aAAAA,CAAAA,mBAAAA,CACCD,UAAW,CAAC,CAAEzD,CAAAA,WAAaE,WAAAA,GAAgBK,SAC3CoD,QAASnF,MAACI,aAAAA,CAAAA,MAAAA,CAAIH,UAAU,gBAEvBmF,EAAAA,QAAQrD,WACP/B,MAACqF,aAAAA,CAAAA,IAAAA,CACCpF,UAAW,AAAC,GAGRI,OAHUA,YACZ,CAAEmB,CAAAA,WAAaE,WAAAA,EACf,iBAIA,OAHErB,YACFmB,WAAaE,YACb,qBAEFmD,QAAS,kBAAMtC,aAAa,SAAC+C,YAAS,CAACA,SAEvCtF,MAACuF,aAAAA,CAAAA,OAAAA,CACCtF,UACEqC,UAAY,gBAAkB,eAAe,IAKpD8C,QAAQ5D,WAAaE,cACpB1B,MAACqF,aAAAA,CAAAA,IAAAA,CACCpF,UAAW,CAAC8B,SAAW,eAAiB,EAAE,CAC1C8C,QAASnD,aAET1B,MAACuF,aAAAA,CAAAA,OAAAA,CAAKtF,UAAU,kBAKvBmF,QAAQ3D,QACPzB,MAACD,aAAAA,CAAAA,YAAAA,IAAAA,CACCC,MAACwF,aAAAA,CAAAA,KAAAA,CAAGvF,UAAU,gBAAgBwB,QAGjCvB,kBAYrB,GAAI2C,WAAa,IAAI,CAAE,CACrB,OAAO7C,oBAACyF,aAActB,IAAAA,CAAAA,EACvB,CAAA,AAED,OAAOA,CACT,CAEA/C,CAAAA,MAAMsE,KAAK,CAAG,SAACvF,cAAUH,oBAACoB,MAAUjB,WAAAA,CAAAA,EAAAA,MAAAA,CAAOkB,KAAK,WAChDD,CAAAA,MAAMuE,KAAK,CAAG,SAACxF,cAAUH,oBAACoB,MAAUjB,WAAAA,CAAAA,EAAAA,MAAAA,CAAOkB,KAAK,WAChDD,CAAAA,MAAMwE,IAAI,CAAG,SAACzF,cAAUH,oBAACoB,MAAUjB,WAAAA,CAAAA,EAAAA,MAAAA,CAAOkB,KAAK,UAC/CD,CAAAA,MAAMyE,KAAK,CAAG,SAAC1F,cAAUH,oBAACoB,MAAUjB,WAAAA,CAAAA,EAAAA,MAAAA,CAAOkB,KAAK,WAEhDD,CAAAA,MAAM0E,MAAM,CAAG/F,WACfqB,CAAAA,MAAM2E,IAAI,CAAGtF,SACbW,CAAAA,MAAM4E,MAAM,CAAG1F,YCzMR,IAAM2F,kBAAgD,eASvD,mBARJjE,OAAAA,wBAAS,KAAK,4BACdkE,YAAAA,kCAAc,wCACd5E,UAAAA,8BAAY,IAAI,+BAChB6E,YAAAA,kCAAc,uBACdC,oBAAAA,cACA1E,kBAAAA,YACA2E,aAAAA,2BACAC,aAAAA,oCAAe,CAAEC,KAAM,KAAK,AAAC,gBAE7B,IAA0BvG,mBAAAA,MAAMqC,QAAQ,CAAC,KAAK,KAAvCmE,MAAmBxG,OAAZyG,SAAYzG,OAC1B,IAA8BA,oBAAAA,MAAMqC,QAAQ,CAAC,KAAK,KAA3CqE,QAAuB1G,QAAd2G,WAAc3G,QAE9B,OACEA,MAACoB,aAAAA,CAAAA,MAAAA,CACCY,OAAQA,OACRR,UAAAA,IAAS,CACTE,YAAaA,YACbJ,UAAWA,UACXG,MAAM,gBAENzB,MAACS,aAAAA,CAAAA,UAAAA,IAAAA,CACE4F,OACAC,AAAAA,CAAAA,eAAAA,IAAAA,EAAAA,eAAAA,KAAAA,EAAAA,KAAAA,EAAAA,aAAcC,IAAI,AAAJA,EACbvG,MAACI,aAAAA,CAAAA,MAAAA,CAAIH,UAAU,cACbD,MAAC4G,aAAAA,CAAAA,QAAAA,CAAM3G,UAAU,YACfD,MAAC6G,aAAAA,CAAAA,QAAAA,CACCC,KAAK,WACLC,QAASL,QACTM,SAAU,SAAClC,EAAqC,CAC9C6B,WAAW7B,EAAEmC,MAAM,CAACF,OAAO,CAC7B,IAEF/G,MAACuF,aAAAA,CAAAA,OAAAA,CAAKtF,UAAU,oBAChBD,MAACuF,aAAAA,CAAAA,OAAAA,CAAKtF,UAAU,mBACbqG,aAAaY,IAAI,EAAI,qBAI1B,IAAI,EAEVlH,MAACM,aAAAA,CAAAA,YAAAA,IAAAA,CACCN,MAACmH,aAAAA,CAAAA,OAAOC,KAAK,CAAA,CAACvC,QAASnD,WAAa,EAAA,SACpC1B,MAACmH,aAAAA,CAAAA,OAAAA,CACCE,MAAOnB,YACPoB,SAAUd,MACV3B,QAAS,kBAAA,UAAY,sEACnB4B,SAAS,IAAI,EACT,SAAML,cAAcM,iBAAxB,GAAI,cAA8BD,SAAS,KAAK,CAAA,aAClD,EAECN,EAAAA,YACAK,MACCxG,MAACuF,aAAAA,CAAAA,OAAAA,CAAKtF,UAAU,wCACd,IAAI,GAKlB,ECpDO,SAASsH,YAAuC,KAUd,CAAe,KATtD9F,MADqD,MACrDA,MACA+F,SAFqD,MAErDA,SACAC,AAAQC,GAH6C,MAGrDD,OACAE,QAJqD,MAIrDA,QACAC,QALqD,MAKrDA,QACAd,KANqD,MAMrDA,KACA9E,OAPqD,MAOrDA,OACA6F,KARqD,MAQrDA,KACAC,SATqD,MASrDA,SAEA,IAAsB9H,mBAAAA,MAAMqC,QAAQ,CAAIuF,YAAjCG,IAAe/H,OAAVgI,OAAUhI,OACtB,IAA0BA,oBAAAA,MAAMqC,QAAQ,CAAC,KAAK,KAAvCmE,MAAmBxG,QAAZyG,SAAYzG,QAC1B,IAAMyH,OAASzH,MAAMiI,WAAW,CAAC,kBAAA,UAAY,oFACvC,OAAOH,WAAa,oBAApB,YAAoC,SAAMA,SAASC,kBAAjB,CAAE,oCAAxC,QAA8D,SAAA,CAE9DtB,SAAS,IAAI,EACb,SAAMiB,GAAGK,aAAT,cACAtB,SAAS,KAAK,EACdkB,yBACC,CAACA,QAASD,GAAIK,IAAKD,SAAS,EAE/B9H,MAAMwC,SAAS,CAAC,kBAAMwF,OAAOJ,UAAU,CAACA,QAAQ,EAEhD,IAAMM,OAASlI,MAAMkE,MAAM,CAAmBhD,WAE9ClB,MAAMwC,SAAS,CAAC,UAAM,CACpB,GAAIR,QAAUkG,OAAOjH,OAAO,CAAEiH,OAAOjH,OAAO,CAACkH,KAAK,EAAA,EACjD,CAACnG,OAAO,EAEX,OACEhC,MAACoB,aAAAA,CAAAA,MAAAA,CAAMY,OAAQA,OAAQR,UAAAA,IAAS,CAACE,YAAaiG,QAASlG,MAAOA,KAC5D,EAAAzB,MAAAoI,aAAA,CAAC3H,eACCT,MAACqI,aAAAA,CAAAA,MAAAA,CACCvB,KAAMA,KACNE,SAAU,SAAClC,UACTkD,OAAOlD,EAAEmC,MAAM,CAACqB,KAAK,GAEvBC,QAAS,SAACzD,EAAuC,CAC/C,GAAIA,EAAE0D,GAAG,GAAK,QAAS,CACrBf,QACD,CAAA,AACH,EACAgB,KAAK,cACLH,MAAOP,IACPnB,MACE5G,MAAAoI,aAAA,CAAApI,MAAA0I,QAAA,CAAA,IAAA,CACGlB,SACDxH,MAACgF,aAAAA,CAAAA,UAAAA,CAAGC,UAAW,CAAC,CAAC4C,MAAQ,OAAOA,OAAS,UACvC7H,MAACuF,aAAAA,CAAAA,OAAAA,CACCoD,eAAcd,KACde,sBAAoB,QACpBC,mBAAiB,MAEjB7I,MAACuF,aAAAA,CAAAA,OAAAA,CACCtF,UAAU,uCACV6I,MAAO,CAAEC,OAAQ,MAAO,OAMlCvI,IAAK0H,MAGT,IAAAlI,MAAAoI,aAAA,CAAC9H,iBACCN,MAACmH,aAAAA,CAAAA,OAAAA,CAAOE,MAAM,QAAQxC,QAAS8C,QAASL,SAAUd,KAAO,EAAA,SAGzDxG,MAACmH,aAAAA,CAAAA,OAAAA,CAAOE,MAAM,UAAUxC,QAAS4C,OAAQH,SAAUd,KAAO,EAAA,KAEvDA,MACCxG,MAACuF,aAAAA,CAAAA,OAAAA,CAAKtF,UAAU,wCACd,IAAI,GAKlB,CC7GA,SAAAH,UAAA,iQAkBO,IAAMkJ,aAAsC,SAAC7I,MAAU,CAC5D,IAA4BH,mBAAAA,MAAMqC,QAAQ,CAAC,EAAE,KAAtC4G,OAAqBjJ,OAAbkJ,UAAalJ,OAE5B,IAAMmJ,SAAWnJ,MAAMiI,WAAW,CAChC,SAACrD,cACCsE,UAAU,SAAC5D,aAAS,AAAIA,mBAAAA,aAAJ,CAAU,eAAEzE,GAAIuI,SAAUC,MAAO,IAAI,EAAKzE,OAAQ,KACxE,EAAE,EAGJ,IAAM0E,UAAYtJ,MAAMiI,WAAW,CAAC,SAACpH,GAAO,CAC1CqI,UAAU,SAAC5D,aACTA,KAAKiE,GAAG,CAAC,SAACC,UAAOA,EAAE3I,EAAE,GAAKA,GAAK,oCAAK2I,IAAGH,MAAO,KAAK,GAAKG,CAAC,IAE7D,EAAG,EAAE,EAEL,IAAMC,YAAczJ,MAAMiI,WAAW,CAAC,SAACpH,GAAO,CAC5CqI,UAAU,SAAC5D,aACTA,KAAKoE,MAAM,CAAC,SAACF,EAAM,CACjB,GAAIA,EAAE3I,EAAE,GAAKA,IAAM,OAAO2I,EAAEG,QAAQ,GAAK,WAAYH,EAAEG,QAAQ,EAAA,CAC/D,OAAOH,EAAE3I,EAAE,GAAKA,EAClB,IAEJ,EAAG,EAAE,EAEL,IAAM+I,WAAa5J,MAAMiI,WAAW,CAClC,SAACpH,GAAI6G,GAAuB,CAC1B4B,UAAUzI,IACVgJ,WAAW,kBAAMJ,YAAY5I,KAAK,KAClC,GAAI6G,GAAIA,IAAAA,EAEV,CAAC4B,UAAWG,YAAY,EAG1BzJ,MAAMwC,SAAS,CAAC,UAAM,CACpB,IAAMkF,GAAK,SAAC8B,UAAML,SAASK,IAC3BM,aAAaC,EAAE,CAAC,YAAarC,IAC7B,OAAO,UAAM,CACXoC,aAAaE,GAAG,CAAC,YAAatC,GAChC,GACC,CAACyB,SAAS,EAEb,GAAI,CAACF,OAAOgB,MAAM,CAAE,OAAO,IAAI,AAAA,CAE/B,OACEjK,oBAACU,YAAgBP,SAAAA,CAAAA,EAAAA,OACd8I,OAAOM,GAAG,CAAC,SAAC3E,MAAU,CACrB,GAAIA,MAAMsF,SAAS,GAAK,UACtB,OACElK,MAACoB,aAAAA,CAAAA,MAAAA,SAAAA,GACKwD,MAAMuF,UAAU,CAAA,CACpB3B,IAAK5D,MAAM/D,EAAE,CACbmB,OAAQ4C,MAAMyE,KAAK,CACnB3H,YAAa,kBAAMkI,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,GAC1D3I,MAAOmD,MAAMnD,KAAK,GAEjBmD,MAAMyF,QAAQ,CACb,OAAOzF,MAAMyF,QAAQ,GAAK,WACxBzF,MAAMyF,QAAQ,CAAC,CACbC,MAAO,kBAAMV,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,KAGtDG,aAAa3F,MAAMyF,QAAQ,CAAE,CAC3BC,MAAO,kBAAMV,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,EACtD,EACD,CAEDpK,MACEoI,aAAA,CAAApI,MAAA0I,QAAA,CAAA,IAAA,CAAA1I,MAAAoI,aAAA,CAAC3H,UAAWmE,IAAAA,CAAAA,MAAM4F,IAAI,EACtBxK,MAAAoI,aAAA,CAAC9H,YACEsE,IAAAA,CAAAA,MAAM6F,OAAO,CAAClB,GAAG,CAAC,SAACmB,OAAQC,YAC1B3K,MAACmH,aAAAA,CAAAA,OAAAA,CACCqB,IAAKmC,IACLtD,MAAOqD,OAAOrD,KAAK,EAAI,QACvBxC,QAAS,SAACC,EAAM,CACd,GAAI,OAAO4F,OAAO7F,OAAO,GAAK,WAC5B6F,OAAO7F,OAAO,CAACC,EAAG,kBAChB8E,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,SAEtCR,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,CAAA,AAC9C,CAECM,EAAAA,OAAOxD,IAAI,KAKrB,CAAA,CAIP,GAAItC,MAAMsF,SAAS,GAAK,eACtB,OACElK,MAACoB,aAAAA,CAAAA,MAAAA,CACCoH,IAAK5D,MAAM/D,EAAE,CACbmB,OAAQ4C,MAAMyE,KAAK,CACnB7H,UAAAA,IAAS,CACTE,YAAa,kBAAMkI,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,GAC1D3I,MAAOmD,MAAMnD,KAAK,AAElB,EAAAzB,MAAAoI,aAAA,CAAC3H,eAAWmE,MAAM4F,IAAI,EACtBxK,MAAAoI,aAAA,CAAC9H,iBACCN,MAACmH,aAAAA,CAAAA,OAAAA,CACCE,MAAOzC,MAAMgG,WAAW,EAAI,QAC5B/F,QAAS,kBAAM+E,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,EAErDxF,EAAAA,MAAM8F,MAAM,GAAA,CAMvB,GAAI9F,MAAMsF,SAAS,GAAK,SAAU,CAChC,GAAI,OAAOtF,MAAMiG,OAAO,GAAK,YAAa,CACxC,IAKIjG,SAAAA,MAAMiG,OAAO,UAAbjG,SAJFgD,QAAAA,0BAAU,kBAIRhD,SAHFkC,KAAAA,oBAAO,mBAGLlC,SAFFiD,KAAAA,oBAAO3G,0BAEL0D,SADFkD,SAAAA,4BAAW5G,oBAEb,OACElB,MAACuH,aAAAA,CAAAA,YAAAA,CACCiB,IAAK5D,MAAM/D,EAAE,CACbmB,OAAQ4C,MAAMyE,KAAK,CACnB1B,QAAS,kBAAMiC,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,GACtD3C,OAAQ7C,MAAM8C,EAAE,CAChBjG,MAAOmD,MAAMnD,KAAK,CAClB+F,SAAU5C,MAAM4C,QAAQ,CACxBI,QAASA,QACTd,KAAMA,KACNe,KAAMA,KACNC,SAAUA,UAGf,CAAA,AAED,OACE9H,MAACuH,aAAAA,CAAAA,YAAAA,CACCiB,IAAK5D,MAAM/D,EAAE,CACbmB,OAAQ4C,MAAMyE,KAAK,CACnB1B,QAAS,kBAAMiC,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,GACtD3C,OAAQ7C,MAAM8C,EAAE,CAChBjG,MAAOmD,MAAMnD,KAAK,CAClB+F,SAAU5C,MAAM4C,QAAQ,CACxBI,QAAShD,MAAMgD,OAAO,CACtBd,KAAMlC,MAAMkC,IAAI,CAChBe,KAAMjD,MAAMiD,IAAI,EAGrB,CAAA,AAED,GAAIjD,MAAMsF,SAAS,GAAK,eACtB,OACElK,MAACiG,aAAAA,CAAAA,kBAAAA,CACCuC,IAAK5D,MAAM/D,EAAE,CACbmB,OAAQ4C,MAAMyE,KAAK,CACnBhD,OAAQzB,MAAMyB,MAAM,CACpBD,aAAAA,qBAAe,kBAAA,SAAOE,aAAiB,KAC/BwE,uEAAI,SAAMlG,MAAMmG,SAAS,CAACzE,sBAA1BwE,EAAI,cACV,GAAIA,EAAGlB,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,CAAA,CAC9C,SAAO,IAAI,IACb,mBAJsB9D,oDAKtB5E,YAAa,kBAAMkI,WAAWhF,MAAM/D,EAAE,CAAE+D,MAAMwF,YAAY,GAC1DjE,YAAavB,MAAMuB,WAAW,CAC9BD,YAAatB,MAAMsB,WAAW,CAC9BI,aAAc1B,MAAM0B,YAAY,GAItC,OAAO,IAAI,AACb,GAGN,EC/KO,SAAS0E,aACd3E,MAAiB,CACjB0E,SAAiE,CAIlD,KAHf7E,YAAAA,uDAA2B,SAAS,CACpCC,YAAAA,uDAAc,SAAS,CACvBG,aAAAA,uDAA6B,CAAEC,KAAM,KAAK,AAAC,CAAC,CAE5C,GAAI,CAACF,OAAQ,MAAM,IAAI4E,MAAM,2BAA4B,CACzD,GAAI,CAACF,WAAa,OAAOA,YAAc,WACrC,MAAM,IAAIE,MAAM,qDAAsD,CAExE,OAAO,IAAIC,QAAQ,SAACC,gBAClBrB,aAAasB,IAAI,CAAC,YAAa,CAC7BlB,UAAW,eACX7D,OAAQrG,oBAACqL,IAAGhF,IAAAA,CAAAA,QACZ0E,UAAAA,UACA5E,YAAAA,YACAD,YAAAA,YACAI,aAAAA,aACA8D,aAAce,OAChB,IAEJ,CASO,IAAMG,kBAAuC,SAClD7J,MACA+I,KAGkB,KAFlBI,mEAAc,QACdF,8DAAS,KAET,GAAI,CAACjJ,OAAS,CAAC+I,KAAM,MAAM,IAAIS,MAAM,mCAAoC,CAEzE,OAAO,IAAIC,QAAQ,SAACC,QAAY,CAC9BrB,aAAasB,IAAI,CAAC,YAAa,CAC7BlB,UAAW,eACXzI,MAAAA,MACA+I,KAAAA,KACAI,YAAAA,YACAF,OAAAA,OACAf,SAAUwB,OACZ,EACF,EACF,EAsBO,SAAS9E,OACd5E,KAAa,CACb+F,QAAmB,CACnBE,EAAsC,CACtCE,OAA4B,CAGb,KAFfd,KAAAA,uDAAO,MAAM,CACbe,KAAAA,uDAAO3G,SAAS,CAEhB,GAAI,CAACO,OAAS,CAAC+F,SACb,MAAM,IAAIyD,MAAM,uCAAwC,CAE1D,GAAI,OAAOrD,UAAY,SAAU,CAC/B,OAAO,IAAIsD,QAAQ,SAACC,gBAClBrB,aAAasB,IAAI,CAAC,YAAa,CAC7BlB,UAAW,SACXzI,MAAAA,MACA+F,SAAAA,SACAE,GAAAA,GACAmD,QAASjD,QACTwC,aAAce,OAChB,IAEH,CAAA,AAED,OAAO,IAAID,QAAQ,SAACC,gBAClBrB,aAAasB,IAAI,CAAC,YAAa,CAC7BlB,UAAW,SACXzI,MAAAA,MACAmG,QAAAA,QACAd,KAAAA,KACAU,SAAAA,SACAE,GAAAA,GACAG,KAAAA,KACAuC,aAAce,OAChB,IAEJ,CA4BO,IAAMI,aAAoC,eAM5B,KALnB9J,YAAAA,sBACA4I,SAAAA,4BAAW,IAAI,uBACfG,KAAAA,oBAAO,IAAI,sBACXC,QAAAA,0BAAU,EAAE,4BACZN,WAAAA,gCAAa,CAAE,cAEf,OAAO,IAAIe,QAAQ,SAACC,QAAY,CAC9BrB,aAAasB,IAAI,CAAC,YAAa,CAC7BlB,UAAW,UACXzI,MAAAA,MACA4I,SAAAA,SACAG,KAAAA,KACAC,QAAAA,QACAN,WAAAA,WACAC,aAAce,OAChB,EACF,EACF"}